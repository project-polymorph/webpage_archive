<!DOCTYPE html>
<html><head>
	<meta charset="utf-8">
	<title>用户登录</title>
	<meta name="keywords" content="苏宁易购">
	<meta name="description" content="苏宁易购">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="shortcut icon" href="//passport.suning.com/favicon.ico" type="image/x-icon">
	    <script type="text/javascript">
       
        var sn = sn || {};
        //全局变量
        var sn_domain = "http://www.suning.com";
        var server_prefix_domain = "https://ssl.suning.com/emall/";
        var srs_prefix_domain = "https://reg.suning.com/";
        var asc_prefix_domain = "https://aq.suning.com/asc/";
        var passport_domain   = "https://passport.suning.com";
        var sop_prefix_domain = "https://sopssl.suning.com/";
        var goUrl             = "http://www.suning.com/";
    	var rdsy_prefix_domain = "https://rdsy.suning.com/";
		var dt_Siller_Url     = "https://dt.suning.com/detect/dt/dragDetect.json";
		var passport_prefix_domain = "https://passport.suning.com/";

        var loginPBK="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQComqoAyvbCqO1EGsADwfNTWFQIUbm8CLdeb9TgjGLcz95mAo204SqTYdSEUxFsOnPfROOTxhkhfjbRxBV4/xjS06Y+kkUdiMGFtABIxRQHQIh0LrVvEZQs4NrixxcPI+b1bpE0gO/GAFSNWm9ejhZGj7UnqiHphnSJAVQNz2lgowIDAQAB";

    	var companycard_url = srs_prefix_domain + "companycardshow.do";
		//人工审核地址
		var asc_selfService_URL = asc_prefix_domain + "selfService/show.do";
        //登录建议URL
		var loginAdvise_Url = "https://qss.suning.com/ea486.htm";
        //下载易购appURL
		var downLoadApp_Url = "http://sale.suning.com/syb/20120419xsjkhd/index.html";
		//忘记密码
		var forgetPwd_URL = asc_prefix_domain + "forgetpsw.do";
		//会员卡连接地址
		var memberCard_URL = srs_prefix_domain + "b2cMemberCard/offline/cardLogin.do";
        
        var autoLoginCookie_expireDay = 30;
    </script>
    <!-- 引入全站公用资源文件 -->
    <link rel="stylesheet" type="text/css" href="https://res.suning.cn/project/passport/login/b2c_V7/css/??v3common.min.css,login.min.css?v=1541648459319">
	
	<meta content="true" name="autoclick">
    <meta content="d488778a" name="siteid">
    <meta content="8tLoX" name="pageid">
	<!-- 公共页头 -->

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	







	
	



<link rel="shortcut icon" href="//www.suning.com/favicon.ico" type="image/x-icon">

<link rel="stylesheet" href="//res.suning.cn/project/cmsWeb/suning/public/base/public/v3/css/??v3common.min.css,search.min.css,sn-sidebar.min.css?v=2024032202">
<script type="text/javascript" src="//res.suning.cn??/project/cmsWeb/suning/public/base/public/v3/js/jquery.js,/project/cmsWeb/suning/public/base/public/v3/js/sn_lazyload.js,/project/cmsWeb/suning/public/base/public/v3/js/lazyelem.min.js,/project/cmsWeb/suning/public/base/public/v3/js/SFE.base.min.js,/project/cmsWeb/suning/public/base/public/v3/js/assist-toolbar.js,/project/cmsWeb/suning/public/base/public/v3/js/search.min.js,/project/cmsWeb/suning/public/base/public/sidebar/build/js/sn-sidebar.min.js,/project/yunxin/js/chatCompat_mini.js?v=2024032202"></script>


<meta content="true" name="autoclick">
<meta content="d488778a" name="siteid">

<!--[if IE 6]>
<script type="text/javascript" src="//res.suning.cn/public/js/DD_belatedPNG.js"></script>
<![endif]-->
	
    <script type="text/javascript" src="https://res.suning.cn/javascript/sn_da/da_opt.js"></script><script async="" type="text/javascript" src="//sa.suning.cn/cc.js"></script>
    <!-- 设备人机埋点 -->
    <script type="text/javascript" src="https://mmds.suning.com/mmds/mmds.js?appCode=qEmt9X4YmoV2Vye8"></script>
    <script type="text/javascript" src="//res.suning.cn/project/crdnode/common/suAES.min.js"></script>
	<style>*:focus {outline: 1px solid blue;}</style>
<script type="text/javascript" charset="UTF-8" async="" id="mmds_1" src="https://oss.suning.com/mmds/mmds/js/sK1di3Hh1vIKsdA/mmds.XsWjliU4H7uskWk.js"></script><script charset="UTF-8" async="" src="https://oss.suning.com/dfprs2/dfprs/js/djs/dfp_184_05080035/fp.Nfa4WojfKFh5xYb.js"></script></head>
<!--[if lt IE 7 ]><body class="ie ie6"><![endif]-->
<!--[if IE 7 ]><body class="ie ie7"><![endif]-->
<!--[if IE 8 ]><body class="ie ie8"><![endif]-->
<!--[if IE 9 ]><body class="ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<body><!--<![endif]-->
    <a id="ariaTipText" role="pagedescription" aria-label="欢迎进入 用户登录,盲人用户进入智能盲道请按快捷键Ctrl+Alt+R；阅读详细操作说明请按快捷键Ctrl+Alt+问号键。" href="javascript:void(0)"></a><div class="header">
        <a href="http://www.suning.com" class="logo"></a>
        <div style="margin-left:189px;padding:37px 0 0 16px;*zoom:1">
            <div style="margin-right:-100px;*zoom:1">
               <div class="bind-phone">依据《网络安全法》，为保障您的账户安全和正常使用，请尽快完成手机号绑定验证！<a target="_blank" href="https://sale.suning.com/all/regProtocol/yssm.html"><font color="#f60">《隐私政策》</font></a>已上线，将更有利于保护您的个人隐私。</div>
            </div>
            <a name="Logon_index_denglu020" id="LOGIN_ADVISE" href="https://qss.suning.com/ea486.htm" target="_blank" class="advise"><i></i>我想对“登录”提意见</a>
        </div>
        
    </div>
<!--pagename埋点 start-->
<input type="hidden" id="pagename" value="pgcate=10009;pgtitle=登录页">
<!--pagename埋点 end-->
    <div class="main" sap-modid="oKx8J" style="background:url(https://image.suning.cn/uimg/cms/img/171818397460378414.jpg) center no-repeat;">
        <div class="login-c">
            <a href="https://www.suning.com/" target="_blank" class="single-link" name="Logon_index_denglu005"></a>
            <div class="login-form">
            	<div class="login-tab" role="tablist">
                    <a href="javascript:void(0)" role="tab" class="tab-item on" tabindex="1"><span>扫码登录</span><i></i></a>
                    <a href="javascript:void(0)" role="tab" class="tab-item" tabindex="1"><span>账户登录</span><i></i></a>
                </div>
                <div class="pc-login" style="display: none">
                    
                    <div class="username-login">
						<div>
                            <div class="login-warning" style="display: none;"><i></i><span>公共场所不建议自动登录！</span></div>
                            <div class="login-error" style="display:none;"><i></i><span></span></div>
                            <div class="login-blank" style="line-height: 40px; display: block;">&nbsp;</div>
                        </div>
                        <div class="username-box">
                            <div class="input-box" id="showErrorUsernameDiv">
                                <input aria-label="请输入您的用户名或手机号或者邮箱账号" id="userName" type="text" autocomplete="off" value="" tabindex="1" maxlength="64">
                                <label>用户名/手机/邮箱</label>
                                <i class="icon username-icon"></i>
                                <i class="clear"></i>
                            </div>
                            <div class="email-list hide"></div>
                        </div>
                        <div class="password-box">
                            <div class="input-box" id="showErrorPwdDiv">
                                <input aria-label="请输入您的密码" id="password" type="password" autocomplete="off" tabindex="2">
                                <label>密码</label>
                                <i class="icon password-icon"></i>
                                <i class="clear"></i>
                            </div>
                        </div>
                        <div class="verify-box clearfix showErrorVerifyCodeDiv" style="display:none;">
                            <div class="input-box">
                                <input class="validate" type="text" maxlength="4" autocomplete="off" tabindex="3" name="Logon_index_denglu004">
                                <label>验证码</label>
                                <i class="icon verify-icon"></i>
                                <i class="clear"></i>
                                <i class="ok"></i>
                                <i class="error"></i>
                            </div>
                            <a href="javascript:void(0);" class="verify-code">
                                <img id="imageCode1" src="" alt="图形验证码">
                                <span>换一张</span>
                            </a>
                        </div>
                        <div id="Logon_index_denglu039" class="siller-box sillerVerifyCode" style="display:none;margin-bottom:20px;">
                            <div id="siller1" style="display: none;"></div>
                        </div>
                        
                        <div class="siller-box sillerVerifyCode" id="iarUsername" style="display: none;">
                            <div id="iar1" tabindex="3" aria-label="点击按钮进行图形验证"></div>
                        </div>
                        
                        <div class="login-help clearfix">
                            <a class="login-switch code-login" href="javascript:void(0)" tabindex="3"><i></i>短信验证码登录</a>
                            <a id="FORGET_PWD" href="javascript:void(0);" onclick="javascript:forgetPwdClick(); return false;" name="Logon_index_denglu001" class="forget-password" aria-label="忘记密码点击去修改密码" tabindex="4">忘记密码？</a>
                            
                        </div>
                    		<a id="submit" href="javascript:void(0)" onclick="javascript:prepareLoginSubmit();return false;" name="Logon_index_denglu002" class="login-submit" tabindex="5">登 录</a>
                    </div>
                    <div class="phone-login">
                        <div>
                            <div class="login-warning" style="display: none;"><i></i><span>公共场所不建议自动登录！</span></div>
                            <div class="login-error" style="display:none;"><i></i><span></span></div>
                            <div class="login-blank" style="line-height: 40px; display: block;">&nbsp;</div>
                        </div>
                        <div class="phone-box">
                            <div class="input-box" id="showErrorPhoneNumberDiv">
                                <input id="phoneNumber" type="text" autocomplete="off" tabindex="1" maxlength="11" aria-label="请输入您的手机号码">
                                <label>手机号码</label>
                                <i class="icon username-icon"></i>
                                <i class="clear"></i>
                            </div>
                        </div>
                        <div class="verify-box clearfix showErrorVerifyCodeDiv" style="display:none;">
                            <div class="input-box">
                                <input class="validate" type="text" maxlength="4" autocomplete="off" tabindex="2">
                                <label>验证码</label>
                                <i class="icon verify-icon"></i>
                                <i class="clear"></i>
                                <i class="ok"></i>
                                <i class="error"></i>
                            </div>
                            <a name="Logon_index_denglu035" href="javascript:void(0)" class="verify-code">
                                <img id="imageCode2" src="" alt="图形验证码">
                                <span>换一张</span>
                            </a>
                        </div>
                        <div id="Logon_index_denglu040" class="siller-box sillerVerifyCode" style="display:none;">
                            <div id="siller2" style="display: none;"></div>
                        </div>
						
			<div class="siller-box sillerVerifyCode" id="iarUsernamedx" style="display: none;">
                            <div id="iar1dx" tabindex="2" aria-label="点击按钮进行图形验证"></div>
                        </div>
						
                        <div class="sms-box clearfix">
                            <div class="input-box" id="showErrorSmsCodeDiv">
                                <input id="smsCode" type="text" autocomplete="off" tabindex="3" maxlength="6" aria-label="请输入您的手机验证码">
                                <label>手机验证码</label>
                                <i class="icon password-icon"></i>
                                <i class="clear"></i>
                            </div>
                            <a name="Logon_index_denglu033" href="javascript:void(0)" class="send-sms" tabindex="2">获取验证码</a>
                        </div>
			<div style="padding-top:2px;padding-bottom:4px;">
                            <p class="sms-sent">验证码已发送到您的手机，<em>5</em>分钟内有效</p>
                            <!--<div class="voice-verify clearfix">
                                <span>如果您收不到验证码？</span>
                                <a name="Logon_index_denglu034" href="javascript:void(0)" class="send-voice" tabindex="2">获取语音验证码</a>
                            </div>
                            <div class="voice-sent clearfix">
                                <span>电话拨打中</span>
                                <i></i>
                            </div>-->
                            <div class="blank">&nbsp;</div>
                        </div>
                        
                        <div class="login-help clearfix">
                            <a class="login-switch pwd-login" href="javascript:void(0)" tabindex="3"><i></i>账号密码登录</a>
                            <a id="FORGET_PWD" href="javascript:void(0);" onclick="javascript:forgetPwdClick(); return false;" name="Logon_index_denglu001" class="forget-password" aria-label="忘记密码点击去修改密码" tabindex="3">忘记密码？</a>
                        </div>
                        <a id="submit" href="javascript:void(0)" onclick="javascript:prepareLoginSubmit();return false;" name="Logon_index_denglu002" class="login-submit" tabindex="3">登 录</a>
                    </div>
                        
                    
					<form method="post" name="snapshotForm" action="login" id="snapshotForm">
					    <input type="hidden" id="username1" name="username" value="">
					    <input type="hidden" id="password1" name="password" value="">
					    <input type="hidden" id="loginTheme1" name="loginTheme" value="">
					    <input type="hidden" id="highRiskRedirectFlag1" name="highRiskRedirectFlag" value="">
					    <input type="hidden" id="service1" name="service" value="">
					    <input type="hidden" id="oauth_redirect1" name="oauth_redirect" value="">
					    <input type="hidden" id="trust_redirect1" name="trust_redirect" value="">
					    <input type="hidden" id="uuid1" name="uuid" value="">
					    <input type="hidden" id="validate1" name="verifyCode" value="">
						<input type="hidden" id="detect" name="detect" value="">
						<input type="hidden" id="terminal" name="terminal" value="">
						<input type="hidden" id="loginChannel" name="loginChannel" value="">
						<input type="hidden" id="dfpToken" name="dfpToken" value="">
					    <!-- <input type='hidden' id="rememberMeVal" name='rememberMe' value="" />  -->
					</form>
                </div>
                <div class="scan-login" style="display: block;">
                    
                    <div class="scan-box clearfix">
                    
                    		<div class="qrcode" style="width:141px;height:141px;margin:0 auto;transition:.3s all;position:relative;">
                            <img src="https://passport.suning.com/ids/qrLoginUuidGenerate.htm?image=true&amp;yys=1740560145830" style="display:block;width:100%;height:100%;" class="qrCodesId">
                            <span style="position:absolute;top:-30px;left:0;padding-left:8px;display:none">今日首次扫码获<em style="color:#f60;">10</em>云钻</span>
                        </div>
                        <div class="phone-scan"></div>
                    </div>
                    
                    <div id="scanErrorTip" style="display: none;"></div>
                    <div class="scan-success" style="display: none;">
                        <i></i>
                        <p class="success-txt">扫描成功</p>
                        <p class="not-refresh">请勿刷新页面，按手机提示操作！</p>
                    </div>
                    
                    <p class="open-app"><i></i>打开<a name="Logon_index_denglu019" id="DOWNLOAD_APP" href="http://sale.suning.com/syb/20120419xsjkhd/index.html" target="_blank"><em>苏宁易购APP</em></a>扫码登录</p>
                    
                </div>
                <div class="free-reg">
					<a id="FREE_TO_REG" href="javascript:void(0);" name="Logon_index_denglu003" style="font-size: 12px;color: #ff6600;" onclick="javascript:freeToRegClick(); return false;" aria-label="点击注册新账号" tabindex="6">注册 有惊喜 &gt;</a>
                </div>
                <div class="bind-login">
                    <span class="title">使用以下账号登录</span>
                    <div class="common clearfix">
                        <a name="Logon_index_denglu027" href="javascript:void(0);" onclick="javascript:qqLogin(); return false;" class="qq" aria-label="QQ联合登录" tabindex="7"><i></i>QQ</a>
                        <a name="Logon_index_denglu026" href="javascript:void(0);" onclick="javascript:weixinLogin(); return false;" class="weixin" aria-label="微信联合登录" tabindex="7"><i></i>微信</a>
                        <!-- <a name="Logon_index_denglu032" href="javascript:void(0);" class="zhifubao"><i></i>支付宝</a> -->
                        <a name="Logon_index_denglu017" href="javascript:void(0);" onclick="javascript:eppLogin(); return false;" class="yifubao" aria-label="易付宝联合登录" tabindex="7"><i></i>易付宝</a>
                        <a name="Logon_index_denglu031" href="javascript:void(0);" onclick="javascript:weiboLogin(); return false;" class="weibo" aria-label="微博联合登录" tabindex="7"><i></i>微博</a>
                        <!--<a name="Logon_index_denglu015" href="javascript:void(0);" onclick="javascript:pptvLogin(); return false;" class="pptv"><i></i>PPTV</a>-->
                        <!--<a name="Logon_index_denglu012" href="javascript:void(0);" onclick="javascript:memberCardLogin(); return false;" style="padding-right:0;border-right:0" >门店会员卡</a>-->
                        <!--<a name="Logon_index_denglu030" href="javascript:void(0)" class="view-more"><i></i>更多</a>-->
                    
                    </div>
                    <div class="more">
                      <!--    <a name="Logon_index_denglu012" href="javascript:void(0);" onclick="javascript:memberCardLogin(); return false;">门店会员卡</a>-->
                     <!--<a name="Logon_index_denglu015" href="javascript:void(0);" onclick="javascript:pptvLogin(); return false;">PPTV</a>-->
                    </div>
                </div>
                <div class="login-switch" name="Logon_index_denglu018"></div>
            </div>
        </div>
		<!--二次卡验证-->
		<div class="secondCard-check" style="display:none;">
			<div class="secondCard-check-mask"></div>
			<div class="secondCard-check-con">
				<div class="con-box">
					<div class="header">提示 <span class="closeBtn"></span></div>
					<div class="content">
						<div class="first-step">
						<p class="operat-tip">为保障您的账号安全，请根据实际情况选择</p>
						<div class="operat-choose">
							<span>买过东西</span>
							<span class="op-btn  op-btn-shop">验证后登录&nbsp;&gt;</span>
						</div>
						<div class="operat-choose noshop">
							<span>没买过东西</span>
							<span class="op-btn  op-btn-noshop">获取验证码注册&nbsp;&gt;</span>
						</div>
					</div>
					
					<div class="input-receiver" style="display:none;">
						<p class="operat-tip">请输入历史收货人进行验证</p>
						<div class="input-box">
							<input placeholder="点击输入历史收货人" id="receiver">
						</div>
						<div class="input-error-tip" style="display:none;">
							<span>您输入的收货人不匹配，今天还有2次输入机会，请重新输入</span><a href="javascript:void(0)" class="to-reg">直接获取验证码注册 &gt;</a>
						</div>
						<span class="validate">验证</span>
					</div>
				
					<div class="validate-success" style="display:none;">
						<p>验证码已发送到您的手机，请注意查收</p>
					</div>

					<div class="novalidate-times" style="display:none;">
						<p>您今日验证次数已用完，<br>请明天再来或直接获取验证码注册</p>
						<div class="btn-list">
							<span class="to-register">获取验证码注册</span>
							<span class="cancel">取消</span>
						</div>
						
					</div>
					</div>
					
				</div>
				
			</div>
		</div>
		<!--注册协议-->
		<div class="register-protocol hide">
			<div class="register-protocol-mask"></div>
			<div class="register-protocol-con">
				<div class="con-box">
					<!--<div class="header">注册协议 <span class="protocolCloseBtn"></span></div>-->
					<div class="header">注册协议 <a href="//www.suning.com" class="protocolCloseBtn"></a></div>
					<div class="content">
						<div class="content-box">
							<p>
								【<b>审慎阅读</b>】您在申请注册流程中点击同意前，应当认真阅读以下协议。<b>请您务必审慎阅读、充分理解协议中相关条款内容，其中包括</b>：<br>
								<b>1. 与您约定免除或限制责任的条款；</b><br>
								<b>2. 与您约定法律适用和管辖的条款；</b><br>
								<b>3. 其他以粗体下划线标识的重要条款。</b>
							</p>
							<p style="margin-top:22px;">
								如您对协议有任何疑问，可向平台客服咨询。<br>
								【<b>特别提示</b>】当您按照注册页面提示填写信息、阅读并同意协议且完成全部注册程序后，即表示您已充分阅读、理解并接受协议的全部内容。
							</p>
							<p style="margin-top:22px;">
								<b>阅读协议的过程中，如果您不同意相关协议或其中任何条款约定，您应立即停止注册程序。</b><br>
								<a href="https://hc.suning.com/privacy/index.htm?channelId=158196196466980997" target="_blank" sa-data="{'eleid':'1'}">《苏宁会员章程》</a><br>
								<a href="https://sale.suning.com/all/regProtocol/yfbxy.html" target="_blank" sa-data="{'eleid':'2'}">《易付宝协议》</a><br>
								<a href="https://sale.suning.com/all/regProtocol/yssm.html" target="_blank" sa-data="{'eleid':'3'}">《苏宁隐私政策》</a><br>
								<a href="https://respay.suning.com/eppClientApp/accountDoc/privacy.html" target="_blank" sa-data="{'eleid':'4'}">《易付宝隐私政策》</a><br>
								<a href="https://sale.suning.com/all/regProtocol/sngglmzxxy.html" target="_blank" sa-data="{'eleid':'5'}">《苏宁联盟在线协议》</a><br>
							</p>
						</div>
						
						<a href="javascript:void(0)" class="agree-btn">同意并继续</a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--二次卡验证样式-->
	<style>
		.secondCard-check {
			position: absolute;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			font-family: PingFangSC-Regular;
		}
		.secondCard-check-mask {
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.5);
		}
		.secondCard-check-con {
			position: absolute;
			left: 50%;
			top: 50%;
			margin-left: -215px;
			margin-top: -140px;
			width: 430px;
			height: 280px;
			box-sizing: border-box;
			border: solid 5px rgba(0,0,0,0.2);
		}
		.secondCard-check-con .con-box {
			width: 100%;
			height: 100%;
			background: #fff;
		}
		.secondCard-check-con .con-box .header {
			width: 100%;
			height: 47px;
			line-height: 47px;
			background: #eee;
			font-size: 14px;
			font-family: PingFangSC-Medium;
			color: #666;
			border-bottom: solid 1px #ddd;
			padding-left: 18px;
			box-sizing: border-box;
		}
		.secondCard-check-con .con-box .content {
			width: 100%;
			height: 100%;
		}
		.secondCard-check-con .con-box .header .closeBtn{
			width: 14px;
			height: 14px;
			line-height: 14px;
			font-size: 14px;
			position: absolute;
			right: 18px;
			top: 17px;
			background: url(https://res.suning.cn/project/passport/login/b2c_V7/image/spritesecCard.png?v=1541754766549) -163px -93px no-repeat;
		}
		.secondCard-check-con .con-box .operat-tip {
			font-family: PingFangSC-Medium;
			font-size: 14px;
			color: #222222;
			text-align: center;
			line-height: 74px;
			font-weight: bold;
		}
		.secondCard-check-con .con-box .operat-choose {
			width: 70%;
			height: 36px;
			margin: 0 auto;
			line-height: 36px;
			background: #FFFFFF;
			border: 1px solid #CCCCCC;
			font-size: 14px;
			color: #222222;
			padding-left: 20px;
			box-sizing: border-box;
			font-weight: bold;
			position: relative;
		}
		.secondCard-check-con .con-box .operat-choose.noshop {
			margin-top: 20px;
		}
		.secondCard-check-con .con-box .op-btn {
			position: absolute;
			right: 20px;
			top: 8px;
			color: #999;
			line-height: 20px;
		}
		.secondCard-check-con .con-box .input-receiver{
			width: 100%;
			height: calc(100% - 47px);
			position: relative;
		}
		.secondCard-check-con .con-box .input-receiver .input-box{
			width: 70%;
			height: 36px;
			margin: 0 auto;
			line-height: 36px;
			background: #FFFFFF;
			border: 1px solid #CCCCCC;
			font-size: 14px;
			color: #222222;
		}
		.secondCard-check-con .input-receiver .input-error-tip {
			width: 70%;
			margin: 0 auto;
			line-height: 18px;
			font-size: 12px;
			color: #FF0000;
		}
		.secondCard-check-con .input-receiver .input-error-tip a {
			color: #2288FF;
		}
		.secondCard-check-con .input-receiver .input-box input {
			border: none;
			width: 100%;
			height: 100%;
			padding-left: 20px;
			box-sizing: border-box;
			font-size: 14px;
			outline: none;
		}
		.secondCard-check-con .input-receiver .validate {
			width: 70%;
			height: 40px;
			line-height: 40px;
			background: #FF6600;
			font-size: 20px;
			color: #FFFFFF;
			position: absolute;
			bottom: 30px;
			left: 15%;
			text-align: center;
		}
		.secondCard-check-con .input-receiver .validate-invisible {
			background: #DDDDDD;
		}
		.secondCard-check-con .validate-success p {
			width: 100%;
			text-align: center;
			line-height: 136px;
		}
		.secondCard-check-con .novalidate-times p {
			margin: 50px 0 67px 0;
			text-align: center;
			font-weight: bold;
		}
		.secondCard-check-con .novalidate-times {
			height: auto;
		}
		.secondCard-check-con .novalidate-times .to-register {
			width: 37%;
			height: 40px;
			line-height: 40px;
			background: #FF6600;
			font-size: 16px;
			color: #FFFFFF;
			margin-left: 46px;
			display: inline-block;
			text-align: center;
			float: left;
		}
		.secondCard-check-con .novalidate-times .cancel {
			width: 37%;
			height: 40px;
			line-height: 40px;
			border: 1px solid #CCCCCC;
			font-size: 16px;
			color: #999999;
			margin-right: 46px;
			display: inline-block;
			text-align: center;
			float: right;
		}
	</style>
	<!--注册协议样式-->
	<style>
		.register-protocol {
			position: absolute;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			font-family: PingFangSC-Regular;
		}
		.register-protocol-mask {
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.5);
		}
		.register-protocol-con {
			position: absolute;
			left: 50%;
			top: 50%;
			width: 600px;
			height: 440px;
			margin-top: -220px;
			margin-left: -300px;
			border: solid 5px rgba(0,0,0,0.2);
		}
		.register-protocol-con .con-box {
			width: 100%;
			height: 100%;
			background: #fff;
		}
		.register-protocol-con .con-box .header {
			width: 100%;
			height: 47px;
			line-height: 47px;
			background: #eee;
			font-size: 14px;
			font-family: PingFangSC-Medium;
			color: #666;
			border-bottom: solid 1px #ddd;
			padding-left: 18px;
			box-sizing: border-box;
		}
		.register-protocol-con .con-box .content {
			width: 100%;
			height: calc(100% - 47px);
		}
		.register-protocol-con .con-box .content-box {
			height: 340px;
			width: 100%;
			padding: 20px 0 20px 20px;
			box-sizing: border-box;
		}
		.register-protocol-con .con-box p a{
			color: #FF6600;
		}
		.register-protocol-con .con-box .agree-btn {
			width: 300px;
			height: 40px;
			background: #FF6600;
			border-radius: 2px;
			display: block;
			margin: 0 auto;
			color: #fff;
			text-align: center;
			line-height: 40px;
			outline: none;
			text-decoration: none;
		}
		.register-protocol-con .con-box .header .protocolCloseBtn{
			width: 14px;
			height: 14px;
			line-height: 14px;
			font-size: 14px;
			position: absolute;
			right: 18px;
			top: 17px;
			background: url(https://res.suning.cn/project/passport/login/b2c_V7/image/spritesecCard.png?v=1541754766549) -163px -93px no-repeat;
		}
	</style>
	<!-- 公共页尾 -->
<div class="clear"></div>
<div class="ng-footer">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	







	
	



<div class="ng-s-footer" sap-modid="ViRgl">
	<div class="ng-s-f-con" style="height: 270px;">
		<p class="ng-url-list"><a title="苏宁科技" href="https://tech.suning.com" target="_blank" name="">苏宁科技</a><span>|</span><a title="苏宁金融" href="https://jinrong.suning.com" target="_blank" name="public0_none_sn_jinrong">苏宁金融</a><span>|</span><a title="苏宁支付" href="https://pay.suning.com/epp-epw/login/login.action?idsTrustFrom=suning&amp;ticket=ST1F1671F32556BC51442EB2ED516EB41D" target="_blank" name="public0_none_sn_zhifu1">苏宁支付</a><span>|</span><a title="PP视频" href="https://www.pptv.com/?rcc_id=snyg" target="_blank" name="public0_none_sn_pptv">PP视频</a><span>|</span><a title="苏宁物流" href="https://wuliu.suning.com/slp/" target="_blank" name="public0_none_sn_wuliu">苏宁物流</a><span>|</span><a title="零售云" href="https://lsy.suning.com/" target="_blank" name="">零售云</a><span>|</span><a title="知识产权举报" href="https://ipp.suning.com/sips/toAgree.action" target="_blank" name="public0_none_sn_zhishi">知识产权举报</a><span>|</span><a title="投资者关系" href="https://www.suning.cn/cms/enterpriseManagementIntro/index.htm" target="_blank" name="">投资者关系</a><span>|</span><a title="苏宁智能" href="https://smarthome.suning.com/" target="_blank" name="">苏宁智能</a><span>|</span><a title="苏宁易采云" href="https://ycy.suning.com/" target="_blank" name="">苏宁易采云</a></p>
		<p class="ng-url-list"><a href="https://hc.suning.com/help/channel-153317970815764428.htm" target="_blank" name="public0_none_sn_callme">联系我们</a><span>|</span><a href="https://careers.suning.cn/" target="_blank" name="public0_none_sn_zhaopin">诚聘英才</a><span>|</span><a href="https://cc.suning.com/" target="_blank" name="public0_none_sn_gongyingshang">合作招商</a><span>|</span><a href="https://ap.suning.com/aps-sale-web/" target="_blank" name="public0_none_sn_guanggao">广告平台</a><span>|</span><a href="https://sums.suning.com/" target="_blank" name="public0_none_sn_lianmeng">苏宁联盟</a><span>|</span><a href="https://queqiao.suning.com" target="_blank" name="public0_none_sn_queqiao">鹊桥联盟</a><span>|</span><a href="https://zb.suning.com/bid-web/main.htm" target="_blank" name="public0_none_sn_zhaobiao">苏宁招标</a><span>|</span><a href="https://hc.suning.com/privacy/index.htm" target="_blank" name="public0_none_sn_law">隐私政策</a><span>|</span><a href="https://ueip.suning.com/pc/index.htm" target="_blank" name="public0_none_sn_tiyan">用户体验提升计划</a><span>|</span><a href="https://mrs.suning.com/mrs-web/stockholder/check.htm" target="_blank" name="public0_none_sn_gudong">股东会员认证</a><span>|</span><a href="https://www.beankeji.com/cms/pc.htm" target="_blank" name="">苏宁科技</a></p>
		<p class="ng-copyright" style="display: block;">
			Copyright© 2020-2025深圳市云网万店电子商务有限公司版权所有<span>|</span>
			<a title="苏公网安备 32010202010078号" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32010202010078" rel="nofollow" style="color:#999" class="gwab"><i></i>苏公网安备 32010202010078号</a><span>|</span>
			<a title="粤ICP备2021027996号" href="https://beian.miit.gov.cn/" target="_blank" style="color:#999">粤ICP备2021027996号</a></p>
		<p class="ng-copyright ng-copyright-2" style="display: block;">
			<a title="云网万店增值电信业务许可证-合字B2-20210115" href="//res.suning.cn/project/cmsWeb/suning/public/base/images/dx5006-20230922.jpg" target="_blank" rel="nofollow" style="color:#999">云网万店增值电信业务许可证-合字B2-20210115</a><span>|</span>
			<!-- <a title="合字A1.B1.B2-20180017" href="#echo var='IMG_DOMAIN'/public/v3/images/dx1001.png" target="_blank" rel="nofollow" style="color:#999">合字A1.B1.B2-20180017</a><span>|</span> -->
			<a title="出版物经营许可证新出发苏批字第A-243号" href="//res.suning.cn/public/v3/images/cbw-20200402.jpg" target="_blank" rel="nofollow" style="color:#999">出版物经营许可证新出发苏批字第A-243号</a><span>|</span>
			<a href="//res.suning.cn/project/cmsWeb/suning/public/base/images/ypzg-20230922.jpg" target="_blank" rel="nofollow" style="color:#999">互联网药品信息服务资格证书-（粤）-经营性-2022-0500</a></p>
		<p class="ng-copyright ng-copyright-3" style="display: block;">
			<a title="网络食品交易第三方平台备案凭证" href="//res.suning.cn/project/cmsWeb/suning/public/base/images/spjy-20230922.jpg" target="_blank" rel="nofollow" style="color:#999">网络食品交易第三方平台备案凭证</a><span>|</span>
			<a title="经营证照" href="https://cuxiao.suning.com/jyzz2.html" target="_blank" rel="nofollow" style="color:#999">经营证照</a><span>|</span>
			<!-- <a title="网络文化经营许可证：苏网文〔2018〕10580-203号" href="http://sq.ccm.gov.cn/ccnt/sczr/service/business/emark/toDetail/ccaf7746824a4f91af567c29abc4b6aa" target="_blank" rel="nofollow" style="color:#999">网络文化经营许可证：苏网文〔2018〕10580-203号</a><span>|</span> -->
			<a title="互联网违法和不良信息举报邮箱：kfpt-yy@cnsuning.com" href="javascript:;" style="cursor: default;">互联网违法和不良信息举报邮箱：kfpt-yy@cnsuning.com</a><span>|</span>
			<a title="举报电话：02566996699-865948" href="javascript:;" style="cursor: default;">举报电话：02566996699-865948</a>
		</p>
		<p class="ng-copyright" style="display: block;">
			<a title="医疗器械网络交易服务第三方平台备案凭证-（粤）网械平台备字（2023）第00012号" href="//res.suning.cn/project/cmsWeb/suning/public/base/images/ylqx-20230922.jpg" target="_blank" rel="nofollow" style="color:#999">医疗器械网络交易服务第三方平台备案凭证-（粤）网械平台备字（2023）第00012号</a><span>|</span>
			<a title="变更公告" href="//res.suning.cn/public/v3/images/bggg-20210506.jpg?v=2021050601" target="_blank" rel="nofollow">变更公告</a><span>|</span>
			<a title="云网万店营业执照" href="//res.suning.cn/project/cmsWeb/suning/public/base/images/yyzz-20230922.jpg" target="_blank" rel="nofollow">云网万店营业执照</a>
			<!-- <a title="合字B2-20210115" href="javascript:;" style="cursor: default;">合字B2-20210115</a> -->
		</p>
		<p class="ng-copyright" style="display: block;">
			<a title="药品网络交易服务第三方平台备案凭证-（粤）网药平台备字（2023）第0031号" href="//res.suning.cn/project/cmsWeb/suning/public/base/images/ypjy-20230922.jpg" target="_blank" rel="nofollow" style="color:#999">药品网络交易服务第三方平台备案凭证-（粤）网药平台备字（2023）第0031号</a><span>|</span>
			<a title="网信算备440303176429902220013号" href="https://hc.suning.com/help/channel-154537341756174978/K16608147330865220.htm" target="_blank" rel="nofollow" style="color:#999">网信算备440303176429902220013号</a>
		</p>
		<p class="ng-copyright" style="display: block;">本网站直接或间接向消费者推销商品或者服务的商业宣传均属于“广告”（包装及参数、售后保障等商品信息除外）</p>
		<p class="ng-copyright" style="display: block;">禁止利用互联网销售烟草（含电子烟）举报电话：12313</p>
		<div class="ng-authentication" style="display: block;">
			<a href="javascript:;" name="public0_none_wb_zs0302" rel="nofollow">
				<img src="//res.suning.cn/project/cmsWeb/suning/homepage/v8/css/images/aria.png" height="24" alt="适老化无障碍服务">
			</a>
			<a href="https://cuxiao.suning.com/scms/RZA.html" target="_blank" name="public0_none_wb_zs0303" rel="nofollow">
				<img src="//res.suning.cn/public/v3/images/unicom.png" height="24" width="76" alt="中国联通授权网络经营代理商">
			</a>
			<a href="https://cuxiao.suning.com/scms/RZAcopy1.html" target="_blank" name="public0_none_wb_zs0304" rel="nofollow">
				<img src="//res.suning.cn/public/v3/images/dianxin.jpg" height="24" width="76" alt="中国电信授权网络经营代理商">
			</a>
			<a href="https://cuxiao.suning.com/scms/RZAcopy.html" target="_blank" name="public0_none_wb_zs0305" rel="nofollow">
				<img src="//res.suning.cn/project/cmsWeb/suning/public/base/images/yidong-20221009.png" height="24" width="76" alt="中国移动授权网络经营代理商">
			</a>
			<a href="//www.12377.cn/node_548446.htm" target="_blank" rel="nofollow" name="public0_none_wb_zs0306">
				<img src="//res.suning.cn/public/v3/images/netsafe1.png?v=01" height="24" width="72" alt="网络举报app下载">
			</a>
			<a href="//www.12377.cn/" target="_blank" rel="nofollow" name="public0_none_wb_zs0307">
				<img src="//res.suning.cn/public/v3/images/netsafe2.png?v=01" height="24" width="144" alt="网上有害信息举报">
			</a>
			<a href="http://www.shdf.gov.cn/shdf/channels/740.html" target="_blank" rel="nofollow" name="public0_none_wb_zs0308">
				<img src="//res.suning.cn/public/v3/images/netsafe3.png?v=01" height="24" width="166" alt="扫黄打非">
			</a>
		</div>
	</div>
</div>
<!--top fix bar [[-->
<div class="ng-fix-bar"></div>
<!--top fix bar ]]-->
</div>
<style type="text/css">
.ng-footer{height:200px;margin-top:0;}
.ng-s-footer{height:185px;background:none;text-align:center;}
.ng-s-footer p.ng-url-list{height:25px;line-height:25px;}
.ng-s-footer p.ng-url-list a{color:#666666;}
.ng-s-footer p.ng-url-list a:hover{color:#f60;}
.ng-s-footer .ng-authentication{float:none;margin:0 auto;height:25px;width:990px;margin-top:5px;}
.ng-s-footer p.ng-copyright{float:none;width:100%;}
.root1200 .ng-s-footer p.ng-copyright{width:100%;}
</style>
   
    <script type="text/html" class="send-voice-success">
        <div class="send-voice-success-dialog">
            <div class="dialing"></div>
            <p class="tell">稍后苏宁客服将电话与您联系，告知验证码～</p>
            <a name="Logon_index_denglu036" href="javascript:void(0)" class="button close">确 定</a>
        </div>
    </script>
    <script type="text/javascript" src="https://res.suning.cn/public/v3/js/jquery.js"></script>
    <script type="text/javascript" src="https://dt.suning.com/detect/dt/siller.js"></script>
    <script type="text/javascript" src="//res.suning.cn/project/passport/login/b2c_V7/js/??SFE.lion.dialog.min.js,security.min.js,loginSecCard.min.js?v=20210925"></script>
	<script type="text/javascript" src="https://res.suning.cn/project/asc/style/js/loginProtectVerifyPop-min.js?v=20170224"></script>
	<script src="https://iar-web.suning.com/iar-web/snstatic/SnCaptcha.js"></script> 
	<script type="text/javascript">
		document.addEventListener('keydown', function(e) {
			var key = e.key;
			var activeEl = document.activeElement;
			var focusElement = function (selector, delay) {
				setTimeout(function() {
					document.querySelector(selector).focus();
				}, delay||50);
			}
			if(key === 'Tab' && activeEl === document.querySelector('.weibo')) {
				focusElement('.tab-item')
			}
			if(key == 'Enter') {
				if(activeEl === document.querySelector('.tab-item:nth-of-type(2)')) {
					focusElement('#userName')
				} else if(activeEl.classList.contains('login-switch')) {
					if(activeEl.classList.contains('code-login')) {
						focusElement('#phoneNumber', 1000)
					} else {
						focusElement('#userName', 1000);
					}
				}
			}
		}, true);
		if(window.MutationObserver) {
			var observer = new MutationObserver(function(mutationList) {
				mutationList.forEach(function(mutation) {
					var el = mutation.target;
					if(mutation.type == 'attributes' && el == document.querySelector('.phone-login')) {
						if(el.style.display == 'block') {
							setTimeout(function() {
								document.querySelector('#phoneNumber').focus();
							}, 1000);
						} else {
							setTimeout(function() {
								document.querySelector('#userName').focus();
							}, 1000);
						}
					}
				});
			});
			observer.observe(document.querySelector('.phone-login'), {attributes: true})
		}
    	var iar;//要初始化的验证码实例
		var iarTicket;
		var iarToken;
  		//获取到的目标地址  将请求路径中的&amp; 替换为 &
    	var service = "https://loginst.suning.com//auth?targetUrl=https%3A%2F%2Fproduct.suning.com%2F0070881552%2F11201361410.html";
        var trust_redirect = "";
    	var oauth_redirect = "";
        service = service.replaceAll('&amp;','&');
		trust_redirect = trust_redirect.replaceAll('&amp;','&');
        //关闭短信验证码标识
		var notUseSmsLogin = "0";
		
		//免费注册
	    var Request = new Object();
	    Request = login.getRequestParam();
	    var userTargetUrl = "?loginTheme=b2c&service=https%3A%2F%2Floginst.suning.com%2F%2Fauth%3FtargetUrl%3Dhttps%253A%252F%252Fproduct.suning.com%252F0070881552%252F11201361410.html".split("targetUrl%3D")[1];
	    var custSource = Request['custSource'];
	    var freeToReg_URL = srs_prefix_domain + "person.do";
	    if(userTargetUrl){
	    	var freeToReg_URL  = freeToReg_URL + "?myTargetUrl="+decodeURIComponent(userTargetUrl);
	    	if(custSource){
	    		freeToReg_URL = freeToReg_URL + "&custSource=" + custSource;
	    	}
	    }else{
	    	if(custSource){
	    		freeToReg_URL = freeToReg_URL + "?custSource=" + custSource;
	    	}
	    }
	    var getDetect = function(){
			try{
				return bd.rst({ 'scene' : '1' })
			}catch(exception){
				return "passport_detect_js_is_error";
			}
		}
		//终端
		var getTerminal = function(){
			return 'PC';
		}
		//渠道号
    var getChannel = function(){
        if (isMac()) {
	    return '208000101001';
	}
        return '208000103001';
    }
    var isMac = function(){
        try{
	    var agent = navigator.userAgent.toLowerCase();
	    return /macintosh|mac os x/i.test(agent);
	}catch(exception){
		return false;
	}
    }
	    var setAllDomain = function(){
	        //设置苏宁首页链接
	        $("#SN_DOMAIN").attr("href",sn_domain);
			//登录建议
			$("#LOGIN_ADVISE").attr("href",loginAdvise_Url);
			//下载易购客户端
			$("#DOWNLOAD_APP").attr("href",downLoadApp_Url);
	    }

		//needVerifyCode:表示是否需要输入验证码
		var needVerifyCodeVal=false;
		var isUseSlideVerifycode=true;
		var isIarVerifyCode=true;
		var slideVerifycode="";
		var secCardFlag=false;
		var remainTimes="";
		//判断走提交还是走注册协议确认按钮
		var protAfterLogin ='0';
		var smsToken_global="";
		//二次卡用户是否购买标识
		var loginOrRegFlag = "0";
    //风控系统返回的ticket用于发送短信
    var rdsyKey="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDZnlkciI+qxNATzQOOcU8rxtfJxlbjRKEhoz1WhuAFuCe6ZHEh85UjGiG0FN0oBCKoC4aprTlzNDEr/cU2bzTJELhs9xoU80Um364GY0zbMr1qnnSouyv0Wb/sgrB/cTDmw8HNiX77mCmX+R4Un/6Xj3BBpm52CHn3RXI9HeE/xwIDAQAB";
		//是否中文验证码
		var chineseValiCode = "false";
		
		//图片验证码输错三次才刷新
		var gImgVerCdeErrorCount = 0;
		//最近一次输入的图片验证码,不重复校验相同的图片验证码
		var gLastImgValCode = "";
		var gLastImgValCodeResult = false;
		
    var ssojbossValue = {smsTicket:"",loginTicket:"",riskType:""};
    var ssojbossConstant = {rdsyAppCode:"9FAD2DDEFE754D604779F7BB8264C80F",stepFlag:"8763EC7BB5D7EEE18EDD1E4BD59A1679",
        stepTwoFlag:"3D58885D2B0CB135703770C03852E8CB", rdsySceneId:"PASSPORT",stepThreeFlag:"08DD83216388DA0A29B5B3CEE0CC0E6F",channel:"PC",
        checkAccountKey: "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOuozMgVH/glMcCOIDKjXP83zDmgi6hKvwB9VLQG6RWcxm/lNmB/Uq3LGdKUnm+JBFy1GeHA8oNKLFROF/ebzSqr6kOkuSsAZmcvsvgaigD7cSzIipdfJpE3bZd9y7X8Mq+uDhNKpvlH9lR+OmTgMFAKq8w6QMYY+ksHjWINSDIwIDAQAB"};
    var ssojbossUtil = {
        rsaEncryptString : function(encryptString, key){
            var phoneNumberRsa = "";
            try {
                var rsaEncrypt = new JSEncrypt();
                rsaEncrypt.setPublicKey(key);
                phoneNumberRsa=rsaEncrypt.encrypt(encryptString);
            } catch (exception) {
            }
            return phoneNumberRsa;
        },
        hideAllVerifyCode : function(){
            $("#iarUsername").hide();
            $("#iarUsernamedx").hide();
            $("#siller1").hide();
            $(".sillerVerifyCode1").hide();
            $(".sillerVerifyCode2").hide();
            $("#siller2").hide();
            $(".showErrorVerifyCodeDiv").hide();
        },
        judgeVerifyType : function(riskType){
            if(riskType=='isIarVerifyCode'){
				secCardFlag=true;
                isIarVerifyCode=true;
                needVerifyCodeVal = true;
                isUseSlideVerifycode = false;
                showAndHideVerifyCode(needVerifyCodeVal,isUseSlideVerifycode);
            }else if(riskType=='isSlideVerifyCode'){
				secCardFlag=true;
                isUseSlideVerifycode=true;
                needVerifyCodeVal = true;
                isIarVerifyCode=false;
                showAndHideVerifyCode(needVerifyCodeVal,isUseSlideVerifycode);
            }else if(riskType=='isImgVerifyCode'){
				secCardFlag=true;
                isIarVerifyCode=false;
                needVerifyCodeVal = true;
                isUseSlideVerifycode = false;
                showAndHideVerifyCode(needVerifyCodeVal,isUseSlideVerifycode);
            }else if(riskType=='isNullVerifyCode'){
				secCardFlag=true;
                ssojbossUtil.hideAllVerifyCode();
            }
        }
    };
		//生成登陆之后的调整路径
		function getGoUrl(){
			if(oauth_redirect != "" && oauth_redirect.length != 0){
				goUrl = oauth_redirect;
			}else if (trust_redirect != "" && trust_redirect.length != 0){
				goUrl = trust_redirect;
			}else if(service != "" && service.length != 0){
				var index = service.indexOf("targetUrl=");
				if(index < 0){
					goUrl = service;
				}else{
					goUrl = decodeURIComponent(service.substring(index+10));
				}
			}
			try{
				var pattern = /.*?\.(suning|cnsuning|suningcloud|wuliuyun|snjijin|snisc)\.(com|cn)$/;
				var a_goUrl = parseURL(goUrl);  
				if(!pattern.test(a_goUrl.host)){
					goUrl = sn_domain;
				}
			}catch(e){}
		}
		function parseURL(url) {
		    var getGoUrl_a = document.createElement('a');
		    getGoUrl_a.href = url;
		    return {
		        source: url,
		        protocol: getGoUrl_a.protocol.replace(':', ''),
		        host: getGoUrl_a.hostname,
		        port: getGoUrl_a.port,
		        query: getGoUrl_a.search,
		        params: (function() {
		            var ret = {},
		            seg = getGoUrl_a.search.replace(/^\?/, '').split('&'),
		            len = seg.length,
		            i = 0,
		            s;
		            for (; i < len; i++) {
		                if (!seg[i]) {
		                    continue;
		                }
		                s = seg[i].split('=');
		                ret[s[0]] = s[1];
		            }
		            return ret;
		        })(),
		        file: (getGoUrl_a.pathname.match(/\/([^\/?#]+)$/i) || [, ''])[1],
		        hash: getGoUrl_a.hash.replace('#', ''),
		        path: getGoUrl_a.pathname.replace(/^([^\/])/, '/$1'),
		        relative: (getGoUrl_a.href.match(/tps?:\/\/[^\/]+(.+)/) || [, ''])[1],
		        segments: getGoUrl_a.pathname.replace(/^\//, '').split('/')
		    };
		}
		
		//免费注册
		function freeToRegClick(){
			location.href = freeToReg_URL;
		}
		//忘记密码
		function forgetPwdClick(){
			location.href = forgetPwd_URL;
		}
		//微信联合登录
		function weixinLogin(){
			var weixin = "https://open.weixin.qq.com/connect/qrconnect?appid=wx2c91fc0834ac221c&redirect_uri=https%3A%2F%2Fpassport.suning.com%2Fids%2Flogin%3Foauth_provider%3DWeixinProvider&response_type=code&scope=snsapi_login&state=https%3A%2F%2Floginst.suning.com%2F%2Fauth%3FtargetUrl%3Dhttps%253A%252F%252Fproduct.suning.com%252F0070881552%252F11201361410.html";
			if(service.length>0){
				var b = weixin.indexOf("&state=");
				location.href = weixin.substring(0,b) + "&state=" + encodeURIComponent(service);
			}else{
				location.href = weixin;
			}
		}
                //微博联合登录
		function weiboLogin(){
			var weibo= "https://api.weibo.com/oauth2/authorize?client_id=4120269038&response_type=code&redirect_uri=https%3A%2F%2Fpassport.suning.com%2Fids%2Flogin%3Foauth_provider%3DSinaWeiBoProvider%26loginTheme%3Db2c%26agentType%3Dpc&state=https%3A%2F%2Floginst.suning.com%2F%2Fauth%3FtargetUrl%3Dhttps%253A%252F%252Fproduct.suning.com%252F0070881552%252F11201361410.html";
			if(service.length>0){
				var b = weibo.indexOf("&state=");
				location.href = weibo.substring(0,b) + "&state=" + encodeURIComponent(service);
			}else{
				location.href = weibo;
			}
		}
		//QQ联合登录
		function qqLogin(){
			var loginUrl = "https://passport.suning.com/ids/login?oauth_provider=QQProvider";
			var qq = "https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=101224012&redirect_uri=" + encodeURIComponent(loginUrl) + "&state=state";
			if(service.length>0){
				var b = qq.indexOf("&state=");
				location.href = qq.substring(0,b) + "&state=" + encodeURIComponent(service);
			}else{
				location.href = qq;
			}
		}
		//会员卡首次登录
		function memberCardLogin(){
			location.href = memberCard_URL;
		}
		//易付宝联合登录
		function eppLogin(){
			var epp ="https://paypassport.suning.com/ids/oauth20/authorize?client_id=suning_01&response_type=code&redirect_uri=https%3A%2F%2Fpassport.suning.com%2Fids%2Flogin%3Foauth_provider%3DEppProvider&state=https%3A%2F%2Floginst.suning.com%2F%2Fauth%3FtargetUrl%3Dhttps%253A%252F%252Fproduct.suning.com%252F0070881552%252F11201361410.html";
			if(service.length>0){
			    location.href = epp + "&state=" + encodeURIComponent(service);
			}else{
			    location.href = epp;
			}
		}
		//PPTV联合登录
		function pptvLogin(){
			var pptv = "http://api.passport.pptv.com/authorize.do?client_id=CvoJlCdPF0CDq7NUel7HcOH98g/RE/Ml&client_secret=01&response_type=code&redirect_uri=https%3A%2F%2Fpassport.suning.com%2Fids%2Flogin%3Foauth_provider%3DPPTVProvider&state=https%3A%2F%2Floginst.suning.com%2F%2Fauth%3FtargetUrl%3Dhttps%253A%252F%252Fproduct.suning.com%252F0070881552%252F11201361410.html"
			if(service.length>0){
		        location.href = pptv + "&state=" + encodeURIComponent(service);
			}else{
				location.href = pptv;
			}
		}
		//检测信任登录的cookies信息，做信任跳转
		var checkTrustCookie = function() {
			//信任登录未绑定的标记
			var trustbinding = login.getCookie('trust_user_not_binding');
			if ( trustbinding!=null && trustbinding!=""){
				//保存是从哪里请求的路径  将请求路径中的&amp; 替换为 &
				var serviceStr=decodeURIComponent("https://loginst.suning.com//auth?targetUrl=https%3A%2F%2Fproduct.suning.com%2F0070881552%2F11201361410.html");
				//已解码
				var targetUrl = serviceStr.substring(serviceStr.indexOf("targetUrl") + 10);
			    //跳转
				window.location.href = srs_prefix_domain +　"commThirdPartyLogOrReg.do?trustType=normal&bindingTicket="+trustbinding+"&targetUrl="+targetUrl;
			}
		}
		
		//图片验证码
		function fun_getVcode() {
			gImgVerCdeErrorCount = 0;
			//重新加载图片验证码
			if($('#imageCode1').length > 0){
				$('#imageCode1')[0].src = 'https://vcs.suning.com/vcs/imageCode.htm?uuid='
					+ "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47" + "&sceneId=logonImg&yys=" + new Date().getTime();
			}
			if($('#imageCode2').length > 0){
				$('#imageCode2')[0].src = 'https://vcs.suning.com/vcs/imageCode.htm?uuid='
					+ "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47" + "&sceneId=logonImg&yys=" + new Date().getTime();
			}
			cleanVerifyCodeError();
		}
		
		//登陆初始化默认
		function showScanhide(){
			$('.login-error').find('span').html('');
			$('.login-blank').show().siblings().hide();
			login.autoLoginCheck(0);
			$("#showErrorUsernameDiv").removeClass("input-error");
			$("#showErrorPwdDiv").removeClass("input-error");
			$(".showErrorVerifyCodeDiv .input-box").removeClass("input-error");
			$("#showErrorPhoneNumberDiv").removeClass("input-error");
			$("#showErrorSmsCodeDiv").removeClass("input-error");
		}
		function showErrorInfo(msg,inputId){
			$('.login-error').find('span').html('<a href="javascript:void(0)" style="color: inherit" tabindex="1">'+msg+'</a>');
			$('.login-error').show().siblings().hide();
			if(inputId){
				$("#" + inputId + "").addClass("input-error");
			}
			if(inputId == 'showErrorVerifyCodeDiv'){
				$("." + inputId + "").find('.input-box').addClass("input-error");
			}
			setTimeout(function() {
				var container = login.userLoginType == "smsLogin"? '.phone-login' : '.username-login';
				document.querySelector(container + ' .login-error a').focus();
			}, 50);
		}
		function hideErrorInfo(){
			showScanhide();
		}
		//显示图片验证码正确
		function showVerifyCodeOK(){
			var codeObj = $('.verify-box .input-box input');
			codeObj.siblings('.clear,.error').hide();
			codeObj.siblings('.ok').show();
		}
		//显示图片验证码错误
		function showVerifyCodeError(){
			var codeObj = $('.verify-box .input-box input');
			codeObj.siblings('.clear,.ok').hide();
			codeObj.siblings('.error').show();
		}
		//清除图片验证码提示
		function cleanVerifyCodeError(){
			var codeObj = $('.verify-box .input-box input');
			codeObj.siblings('.ok,.error').hide();
			$(".validate:visible").val("");
			$(".validate:visible").blur();
		}
		//普通登录处理回车事件
		function onNormalLogonKeyPress(evt) {
		  	//兼容IE和Firefox获得keyBoardEvent对象
			evt = (evt) ? evt : ((window.event) ? window.event : "")
			//兼容IE和Firefox获得 keyBoardEvent对象的键值
			var keyCode = evt.keyCode?evt.keyCode:evt.which;
			if(keyCode==13) {
				prepareLoginSubmit();
			}
		}
		//判断大小写锁定 
		function  checkCapsLock(evt){
			//兼容IE和Firefox获得keyBoardEvent对象
			evt = (evt) ? evt : ((window.event) ? window.event : "")
			  //兼容IE和Firefox获得 keyBoardEvent对象的键值
			var keyCode = evt.keyCode?evt.keyCode:evt.which;
		    var isShift  =  evt.shiftKey ||(keyCode  ==   16 ) || false ; 
		    
		     if (((keyCode >=   65   &&  keyCode  <=   90 )  &&   !isShift) 
		     || ((keyCode >=   97   &&  keyCode  <=   122 )  &&  isShift) 
			 ){
				$('.login-warning').find('span').html("键盘大写锁定已打开，请注意大小写");
				$('.login-warning').show().siblings().hide();
			 }else{
				 var msg = $(".login-warning").html();
				 //当在密码输入框中输入正常的时候，错误提示的内容是"键盘大写",的时候，错误提示消失
				 if(msg.indexOf("键盘大写")!=-1){
				 	showScanhide();
				 }
			 }
		}
		//普通登录：提交时检查账号
		function checkNormalLogonIdOnSubmit() {
			// 清掉服务器错误消息
			hideErrorInfo();
			var eml = $('#userName').val();
			if (eml == null || eml == "") {
				showErrorInfo("请输入用户名/邮箱/手机号！","showErrorUsernameDiv");
				return false;
			}
			if (eml.length != 0 && eml.length < 50
					&& eml.match( /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/ )){
				$('#userName').val(eml.toLowerCase());
			} else {
				$('#userName').val(eml);
			}
			hideErrorInfo();
			return true;
		}
		//普通登录：提交时检查密码
		function checkNormalLogonPwdOnSubmit() {
			// 清掉服务器错误消息
			hideErrorInfo();
			var pwd = $('#password').val();
			pwd = pwd.Trim();
			if (pwd.length<6 || pwd.length>20) {
				showErrorInfo("请输入6-20位密码！","showErrorPwdDiv");
				return false;
			} else {
				hideErrorInfo();
				return true;
			}	
		}
		//图片验证码位置按键的弹起事件
		function onKeyUpForValidate(evt){
			//兼容IE和Firefox获得keyBoardEvent对象
			evt = (evt) ? evt : ((window.event) ? window.event : "")
			//兼容IE和Firefox获得 keyBoardEvent对象的键值
			var keyCode = evt.keyCode?evt.keyCode:evt.which;
		    
			if(keyCode==13) {
				prepareLoginSubmit();
			}else{
				checkNormalLogonValidateCodeOnBlur();
			}
		}
		//图片验证码框中焦点移除的时候，进行提示
		function checkValidateCodeOnBlur(){
			var vcd = $('.validate:visible').val();
			if (vcd == null || vcd == "") {
				return;
			}else if(vcd.length == 4){
				//没有在提交中的时候进行提交操作  4个长度的时候需要是字符数字， 3个长度的时候需要是汉字
				return;
			}else{
				//showVerifyCodeError();
				return;
			}
		}
		// 普通登录：失去焦点时检查图片验证码
		function checkNormalLogonValidateCodeOnBlur() {
			// 清掉服务器错误消息
			var vcd = $('.validate:visible').val();
			if (vcd == null || vcd == "") {
				return false;
			} else if(vcd.length == 4){
				//没有在提交中的时候进行提交操作    4个长度的时候需要是字符数字， 3个长度的时候需要是汉字
				if(chineseValiCode == "true"){
					if(isChineseStr(vcd)){
						checkImageValCode();
					}
				}else{
					checkImageValCode();
				}
				return true;
			}
		}
		function checkInputEvent(){
			$("#userName").blur(function(){
				checkShowImageCode();
			});
			$("#userName").keypress(function(){
				onNormalLogonKeyPress();
			});
			$("#phoneNumber").blur(function(){
				checkShowImageCodeSms();
				checkSmsLoginPhone();
			});
			$("#password").keypress(onNormalLogonKeyPress);
			$("#password").keypress(checkCapsLock);
			//实时校验
			$(".validate").keyup(onKeyUpForValidate);
			$(".validate").blur(checkValidateCodeOnBlur);
		}
		
		//是否显示图片验证码
		function checkShowImageCode(){
			var logonIdval = $('#userName').val().Trim();
			if(logonIdval.length > 0){
				userNameBlur("#userName",'');
			}
		}
		function checkShowImageCodeSms(){
			var logonIdval = $('#phoneNumber').val().Trim();
			if(logonIdval.length > 0){
				userNameBlur("#phoneNumber",'');
			}
		}
		//异步是指动态验证码是否显示
		function userNameBlur(o,v){
			if ($(o).val().Trim().length >0){
				var userNameVal=$(o).val();
				userNameVal = userNameVal.Trim();
            if(login.userLoginType == "smsLogin"){

                var param = {
                    sceneId : 'PASSPORT',
                    stepFlag : ssojbossConstant.stepFlag,
                    appCode : ssojbossConstant.rdsyAppCode,
                    data:{
                        ways:'duanxindl',
                        channel:'PC',
                        orderChannel:getChannel(),
                        dfpToken:getDfpToken(),
                        detect:getDetect(),
                        loginTheme:"b2c",
                        referenceURL:window.location.href,
                        userName:userNameVal,
                        cntctMobileNum:userNameVal,
                        mode:'1',
                        subMode:'4'
                    }
                };

                var encodeData=SuAES.encrypt(JSON.stringify(param));
                var _postData = {_x_rdsy_block_:encodeData};
                $.ajax( {
                    type : 'GET',
                    url  : rdsy_prefix_domain + 'rdsy/needVerifyCode.do',
                    data : _postData,
                    dataType : 'jsonp',
                    timeout:5000,
                    jsonpCallback:"needVerifyCode",
                    success : function(data){
                        if(data!=null && data._x_rdsy_resp_!=null){
                            var req = JSON.parse(SuAES.decrypt(data._x_rdsy_resp_));
                            console.log("needVerifyCode===>",req);
                            needVerifyCodeVal = false;
                            if(req.status=='COMPLETE'){
                                ssojbossUtil.hideAllVerifyCode();
                                ssojbossValue.smsTicket=req.data.ticket;
                                ssojbossUtil.judgeVerifyType(req.data.riskType);
                                ssojbossValue.riskType=req.data.riskType;
                            }else{
                                showErrorInfo(req.msg);
                            }
                        }
                    },
                    error : function(data){
                    }
                });

            }else{
                $.ajax( {
                    type : 'POST',
                    url : 'needVerifyCode',
                    data : 'username='+encodeURIComponent(userNameVal)+ '&loginTheme=b2c&version=3.0'+'&detect='+getDetect()+'&dfpToken='+getDfpToken()+'&terminal='+getTerminal()+'&loginChannel='+getChannel(),
                    dataType : 'json',
                    success : function(data) {
                        if(data&& data.needVerifyCode){
                            isIarVerifyCode = data.isIarVerifyCode;
                            needVerifyCodeVal=true;
                            isUseSlideVerifycode=data.isUseSlideVerifycode;
                            showAndHideVerifyCode(needVerifyCodeVal,isUseSlideVerifycode);
                        }else if(data&& !data.needVerifyCode){
                            needVerifyCodeVal=false;
                            isIarVerifyCode=false;
                            isUseSlideVerifycode=false;
                            showAndHideVerifyCode(needVerifyCodeVal,null);
                        }
                    },
                    error : function(data) {
                    }
                });
            }
        }
    };
		//初始化显示图片验证码是否显示
		function initShowVerifyCode(){
			showAndHideVerifyCode(needVerifyCodeVal,isUseSlideVerifycode);
		}
		//显示隐藏验证码
		function showAndHideVerifyCode(isNeedVerifyCodeVal,isUseSlideVerifycodeVal){
        ssojbossUtil.hideAllVerifyCode();
			if(isNeedVerifyCodeVal){
				//if(isIarVerifyCode && login.userLoginType == "username"){//账密拼图验证码，短信登录暂不支持
				if(isIarVerifyCode){
					iarToken="";
					$("#iar1").empty();
                //$(".sillerVerifyCode").hide();
					$("#iarUsername").show();
					//短信图片验证码
					$("#iar1dx").empty();
					$("#iarUsernamedx").show();
					//判读初始化那个滑块
					if(login.userLoginType == "username"){
						initIar('iar1');
					}else{
						initIar('iar1dx');
					}
					
				}else if(isUseSlideVerifycodeVal){
					slideVerifycode="";
					if(login.userLoginType == "username"){
						$("#siller1").empty();
						login.siller('siller1');
						$("#siller1").show();
						$(".sillerVerifyCode1").show();
					}else{
						$("#siller2").empty();
						login.siller('siller2');
						$("#siller2").show();
						$(".sillerVerifyCode2").show();
					}
					//$(".sillerVerifyCode").show();
				}else{
					$(".showErrorVerifyCodeDiv").show();
					//fun_getVcode();
				}
			}else{
				ssojbossUtil.hideAllVerifyCode();
			}
		}
		
		
		function initIarTicket(){
			var userNameVal;
			if(login.userLoginType == "username"){
				userNameVal=$('#userName').val();
			}
			$.ajax( {
				type : 'POST',
				url : 'iarVerifyCodeTicket',
				async: false,
				data : 'username='+encodeURIComponent(userNameVal),
				dataType : 'json',
				success : function(data) {
					if(data && data.result){
						iarTicket = data.ticket;
					}
				},
				error : function(data) {
					
				}
			});
		}
		function initIar(id){
		
			if(!iarTicket){
				initIarTicket();
			}
		
			iar = SnCaptcha.init({
					id:id,//任意值均可
			    env : 'prd', //环境sit,xgpre,prd
			    type : 'inline',//方式插入按钮式
			    target : id, //验证码按钮插入的div的id，必填
			    ticket : iarTicket, //通过注册服务获取的ticket
			    width : '100%', //按钮或者滑块宽度（必填) 
			    height : '40px', //滑块或按钮高度(必填，且必须用具体数值，禁止使用百分比)
			    callback : function(token) { //回调函数
			    	//console.log(token);
			    	iarToken=token;
			    }
		    });
		}
		
		//图片验证码长度大于4的时候进行图片验证码的校验
		function checkImageValCode(){
			var imageValCode = $(".validate:visible").val();
			var vcd = $.trim(imageValCode);
			if(vcd.length == 4){
				return ajaxCheckVerifyCodeOrSubmit(false);	
			}
		}
		//图片验证码框中焦点移除的时候，进行提示
		function checkValidateCodeOnSubmit(){
			
			//if(isIarVerifyCode && login.userLoginType == "username"){
			if(isIarVerifyCode){
				if(iarToken==null || iarToken=="" || !iar.queryStatus()){
					showErrorInfo("为了你的账户安全，请点击按钮完成验证。");
					return false;
				}else{
					return true;
				}
			}else if(isUseSlideVerifycode){
				if (siller.status == 0 || null == slideVerifycode || slideVerifycode == "" ) {
					showErrorInfo("为了你的账户安全，请拖动滑块完成验证。");
					return false;
				}else{
					//已经完成滑动验证
					return true;
				}
	    	}else{
	    		var vcd = $('.validate:visible').val();
				if (vcd == null || vcd == "") {
					showErrorInfo("请输入图片验证码","showErrorVerifyCodeDiv");
					return false;
				}else if(vcd.length == 4){
					//没有在提交中的时候进行提交操作  4个长度的时候需要是字符数字， 3个长度的时候需要是汉字
					return true;
				}else{
					showErrorInfo("验证码不正确，请重新输入。","showErrorVerifyCodeDiv");
					return false;
				}
	    	}
		}
		//检查是否是上次用Ajax校验过的图片验证码，如果是，返回true, 如果不是，则记录下来，返回false
		function isLastImgValCode(code) {
			if (gLastImgValCode == code) {
				return true;
			} else {
				gLastImgValCode = code;
				return false;
			}
		}
		//图片验证码的异步校验
		//isSubmit：是否进行提交 true：表示验证成功之后进行提交操作 ； false：表示仅仅进行验证
		function ajaxCheckVerifyCodeOrSubmit(isSubmit) {
			//if(isIarVerifyCode && login.userLoginType == "username"){
			if(isIarVerifyCode){
				if(iarToken==null || iarToken=="" || !iar.queryStatus()){
					showErrorInfo("为了你的账户安全，请拖点击按钮完成验证。");
					return false;
				}else{
					//进行提交操作
					if(login.userLoginType == "smsLogin"){
						ajaxSmsLogonSubmit();
					}else{
						loginSubmit();
					}
				}
			}else if(isUseSlideVerifycode){
				if (siller.status == 0 || null == slideVerifycode || slideVerifycode == "" ) {
					showErrorInfo("为了你的账户安全，请拖动滑块完成验证。");
					return false;
				}else{
					//进行提交操作
					if(login.userLoginType == "smsLogin"){
						ajaxSmsLogonSubmit();
					}else{
						loginSubmit();
					}
				}
	    	}else{
				//用户输入的验证码code
				var code = $(".validate:visible").val();
				if (!isSubmit && isLastImgValCode(code)) {
					if(gLastImgValCodeResult){
						showVerifyCodeOK();
					}else{
						showVerifyCodeError();
					}
					return;
				}
				//请求时所传参数
				var param = {
						code : code,
						uuid : "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47",
						delFlag : 0
				};
				$.ajax({
					//请求类型
					type : 'POST',
					//发送验证请求的url
					url : "https://vcs.suning.com/vcs/validate_jsonp.htm",
					//请求时所传参数
					data : param,
					//返回数据类型
					dataType : 'jsonp',
					//回调函数方法名
					jsonp : 'callback',
					//请求成功后的回调函数
					success : function(data) {
						//显示验证结果
						if(data[0].result == 'true'){
							gLastImgValCodeResult = true;
							hideErrorInfo();
							showVerifyCodeOK();
							if(isSubmit){
								//进行提交操作
								if(login.userLoginType == "smsLogin"){
									ajaxSmsLogonSubmit();
								}else{
									loginSubmit();
								}
							}
						}else{
							gLastImgValCodeResult = false;
							// 当输入满4位时，鼠标未移出就开始校验图片验证码正确性。若连续输入错误3 次，系统自动刷新图片验证码。
							gImgVerCdeErrorCount++;
							if (gImgVerCdeErrorCount >= 3 || isSubmit) {
								//fun_getVcode();
							}else{
								showVerifyCodeError();
							}
							showErrorInfo("验证码不正确，请重新输入。","showErrorVerifyCodeDiv");
						}
					}
				});
	    	}
		}
		
		
		//采用扫描登陆方式进行登录
		function setLogonStylebyImage(){
			if(typeof(timeOutId) != "undefined"){
				clearInterval(timeOutId);
			}
			showScanInit();
			setQRCodes();
			//实时扫描
			timeOutId = setInterval(checkQRCodesValidate,2000);
		}
		//设置二维码信息
		function setQRCodes(){
			var qrCodesURL = passport_domain+"/ids/qrLoginUuidGenerate.htm?image=true" + "&yys=" + new Date().getTime();
			$(".qrCodesId").attr("src",qrCodesURL);
			return false;
		}
		//实时的探测二维码信息  0：起始状态  1：已有手机扫描了二维码； 2：手机确认授权； 3：uuid不存在或过期；4：系统异常
		function checkQRCodesValidate(){
                         var param = {
					uuid:login.getCookie("ids_qr_uuid"),
					service:"https://loginst.suning.com//auth?targetUrl=https%3A%2F%2Fproduct.suning.com%2F0070881552%2F11201361410.html",
					terminal:getTerminal(),
                                        rememberMe:'true'
			};
			$.ajax( {
				type : 'POST',
				url  : passport_domain+'/ids/qrLoginStateProbe',
				data :param,
				dataType : 'jsonp',
				success : function(data) {
					if(data&& data.state){
						if(data.state == 0){
							//未扫描
							showScanInit();
							return;
						}else if(data.state == 1){
							//手机扫描了二维码
							showScanOK();
						}else if(data.state == 2){
							//手机确认授权
							clearInterval(timeOutId);
							window.location = goUrl;
						}else if(data.state == 3){
							//过期：切换登陆方式
							clearInterval(timeOutId);
							showScanError('<div class="qrcode-exception with-button"><div class="mask"></div><p class="exception">二维码已失效</p><a name="Logon_index_denglu037" href="javascript:void(0)" class="button" onclick="javascript:setLogonStylebyImage();" >点击刷新</a></div>');
						}else if(data.state == 4){
							//系统异常
							showScanError('<div class="qrcode-exception with-button"><div class="mask"></div><p class="exception">账号异常，请使用</p><a name="Logon_index_denglu038" href="javascript:void(0)" class="button" onclick="javascript:login.scanSwitchLoginType();">账号密码登录</a></div>');
						}else if(data.state == 5){
							//系统锁
							showScanError('<div class="qrcode-exception no-button"><div class="mask"></div><p class="exception">您的账号已被锁定<br>请1小时后再试</p></div>');
						}else if(data.state == 6){
							//人工锁
							showScanError('<div class="qrcode-exception no-button"><div class="mask"></div><p class="exception">账号锁定，请联系客服<br>4008-365-365</p></div>');
						}else if(data.state == 7 || data.state == 8 || data.state == 9 || data.state == 10 || data.state == 11 || data.state == 12){
							//风控
							showScanError('<div class="qrcode-exception with-button"><div class="mask"></div><p class="exception">账号存在风险，请使用</p><a name="Logon_index_denglu038" href="javascript:void(0)" class="button" onclick="javascript:login.scanSwitchLoginType();">账号密码登录</a></div>');
						}else if(data.state == 14){
						     //取消授权：切换登陆方式
							clearInterval(timeOutId);
							showScanError('<div class="qrcode-exception with-button"><div class="mask"></div><p class="exception">已取消授权</p><a name="Logon_index_denglu037" href="javascript:void(0)" class="button" onclick="javascript:setLogonStylebyImage();" >点击刷新</a></div>');
						}else{
							showScanError();
						}
					}else{
						//系统异常
						showScanError();
					}
				},
				error : function(data) {
					//系统异常
					showScanError();
				}
			});
		}
		function showScanInit(){
			$('#scanErrorTip').html('');
			$("#scanErrorTip").hide();
			$(".scan-success").hide();
			$(".scan-box").show();
		}
		function showScanOK(){
			$("#scanErrorTip").hide();
			$(".scan-box").hide();
			$(".scan-success").show();
		}
		function showScanError(msg){
			$('#scanErrorTip').html('');
			//$('.qrcode-invalid').prepend($('.scan-box img').clone());
			if(msg){
				$('#scanErrorTip').append(msg);
			}else{
				$('#scanErrorTip').append('<div class="mask"></div><p class="invalid">系统繁忙</p><a href="javascript:void(0)" class="refresh" onclick="javascript:setLogonStylebyImage();">重新扫描登录</a>');
			}
			$(".scan-box").hide();
			$(".scan-success").hide();
			$("#scanErrorTip").show();
		}
		
		//错误次数累计 累计超过2次提示反馈问题
		var errorCount = 0;
		// uncategorized badCredentials serviceNotAvailable E0000001 E4700013 E4700000 E4700464 E4700A37
		function errorCountHandle(errorMessage){
			if(errorCount >= 2){
				errorCount = 0;
				errorMessage = errorMessage + "您可以 <a href='https://qss.suning.com/ea486.htm' target='_blank'>反馈问题</a> ！"
				showErrorInfo(errorMessage);
				return true;
			}
			errorCount = errorCount + 1;
			return false;
		}

		
		//显示服务器返回的错误信息
		function showServerErrorMsg(data) {
			initShowVerifyCode();
			var errorCode= "";
			if(login.isNotEmpty(data) && login.isNotEmpty(data.errorCode)){
				errorCode = data.errorCode;
			}
			var errorMessage="" ;
			if(login.isNotEmpty(data) && login.isNotEmpty(data.errorMessage)){
				errorMessage = data.errorMessage;
			}
			var remainTimes ="";
			if(login.isNotEmpty(data) && login.isNotEmpty(data.remainTimes)){
				remainTimes = data.remainTimes;
			}
			var snMemberErrorCode = "";
			if(login.isNotEmpty(data) && login.isNotEmpty(data.snMemberErrorCode)){
				snMemberErrorCode = data.snMemberErrorCode;
			}
			var logonId = "";
			if(login.isNotEmpty(data) && login.isNotEmpty(data.username)){
				logonId = data.username;
			}else{
				logonId = $('#userName').val();
				logonId = logonId.Trim();
			}
			
			var offlineMemberId = "";
			if(login.isNotEmpty(data) && login.isNotEmpty(data.offlineMemberId)){
				offlineMemberId = data.offlineMemberId;
			}

			//snMemberErrorCode中的错误提示信息
			if(snMemberErrorCode=="E4700A40"|| errorCode=="E4700A40"){
				errorMessage = "该账号密码存在安全风险，请立即<a name='Logon_index_denglu001' href='"+forgetPwd_URL+"' target='_blank' style='float:none'>重置密码</a>。";
				showErrorInfo(errorMessage);
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&该账号密码存在安全风险&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700440" || errorCode=="E4700440" ||
					 snMemberErrorCode=="E4700456" || errorCode=="E4700456" ||
					 snMemberErrorCode=="E4700A37" || errorCode=="E4700A37" ){
				//E4700456 卡不存在  //E4700A37您输入的账号不存在，请重新输入！
				errorMessage='该账户名不存在，<a name="Logon_index_denglu011" href="javascript:void(0);" onclick="javascript:forgetLoginName();">忘记账户名</a>或';
				errorMessage= errorMessage+ '<a name="Logon_index_denglu022" href="'+freeToReg_URL+'" target="_blank">注册新账号</a>?';
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&该账户名不存在&&ssojboss");	
				return;
			}else if(snMemberErrorCode=="E4700451" || errorCode=="E4700451"){
				//存在多个会员卡（重复卡）	会员卡异常，请至门店更换会员卡！
				errorMessage =  "会员卡异常，请至门店更换会员卡！";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700464" || errorCode=="E4700464"){
				//您的会员账号出现异常，请联系4008-365-365！
				errorMessage = "您的会员账号出现异常，请联系4008-365-365！";
				if(errorCountHandle(errorMessage)){
					sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
					return;
				}
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700480" || errorCode=="E4700480"){
				//卡类型为非个人卡类型（公司卡）	非个人卡会员暂不提供线上验证功能！
				errorMessage = "非个人卡会员暂不提供线上验证功能！";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700000" || errorCode=="E4700000"){
				errorMessage = "不好意思，系统繁忙，请稍后再试！";
				if(errorCountHandle(errorMessage)){
					sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
					return;
				}
				showErrorInfo(errorMessage);
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700013" || errorCode=="E4700013"){
				//数据库操作出错	不好意思，系统繁忙，请稍后再试！		
				errorMessage = "不好意思，系统繁忙，请稍后再试！";
				if(errorCountHandle(errorMessage)){
					sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
					return;
				}
				showErrorInfo(errorMessage);
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700450" || errorCode=="E4700450"){
				errorMessage = "您的会员卡资料不完整，为保证您的账户安全，请携带会员卡及有效证件到就近门店补全资料！";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700443" || errorCode=="E4700443"){
				errorMessage = "会员卡已被锁定，请联系4008-365-365解锁。";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700B03" || errorCode=="E4700B03"){
				//E4700B03 会员卡首次登陆
				var jumpUrl = memberCard_URL + "?cardInfo=" + logonId;
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&会员卡首次登陆&&ssojboss");
				window.location.href = jumpUrl;
				return;
			}else if(snMemberErrorCode=="E4700N07" || errorCode=="E4700N07"){
				//E4700N07手机号存在多个会员
				var jumpUrl = memberCard_URL + "?cardInfo=" + logonId;
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&手机号存在多个会员&&ssojboss");
				window.location.href = jumpUrl;
				return;
			}else if(snMemberErrorCode=="E4700N11" || errorCode=="E4700N11"){
				//E4700N11 手机为团体会员的联系人手机，不能登录
				errorMessage='该账户名不存在，<a name="Logon_index_denglu011" href="javascript:void(0);" onclick="javascript:forgetLoginName();">忘记账户名</a>或';
				errorMessage= errorMessage+ '<a name="Logon_index_denglu022" href="'+freeToReg_URL+'" target="_blank">注册新账号</a>?';
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&手机为团体会员的联系人手机，不能登录&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E4700487" || errorCode=="E4700487"){
				//E4700487  非个人会员卡不能绑定易购
				errorMessage = "非个人会员卡暂不提供线上登录验证。";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(snMemberErrorCode=="E0000001" || errorCode=="E0000001"){
				errorMessage = "不好意思，系统繁忙，请稍后再试！";
				if(errorCountHandle(errorMessage)){
					sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
					return;
				}
				showErrorInfo(errorMessage);
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}

			//errorCode类型的错误提示信息
			if(errorCode=="badVerifyCode"){
				errorMessage = "验证码不正确，请重新输入";
				showErrorInfo(errorMessage,"showErrorVerifyCodeDiv");
				return;
			}else if(errorCode=="hkAccountNotAvailable"){
				errorMessage = "该账号为香港苏宁用户，暂不支持在苏宁易购登录";
				showErrorInfo(errorMessage);
				return;
			}else if(errorCode=="badIARVerifyCode"){
				errorMessage = "为了你的账户安全，请拖点击按钮完成验证";
				showErrorInfo(errorMessage);
				return;
			}else if(errorCode=="badSlideVerifyCode"){
				errorMessage = "为了你的账户安全，请重新拖动滑块完成验证";
				showErrorInfo(errorMessage);
				return;
			}else if(errorCode=="needVerifyCode"){
				if(isUseSlideVerifycode){
					errorMessage = "为了你的账户安全，请重新拖动滑块完成验证";
					showErrorInfo(errorMessage);
				}else{
					errorMessage = "请输入图片验证码！";
					showErrorInfo(errorMessage,"showErrorVerifyCodeDiv");
				}
				return;
			}else if(errorCode=="badPassword.msg1"){
				errorMessage="您输入的账户名与密码不匹配，请重新输入！<br/><a name='Logon_index_denglu008' href='"+forgetPwd_URL+"' target='_blank' style='float:none'>忘记密码</a>或<a href='#' onclick='javascript:forgetLoginName();'>账户名</a>？";
				showErrorInfo(errorMessage);
				$('#password').val('');
				return;
			}else if(errorCode=="badPassword.msg2"){
				errorMessage="密码错误，您还可以尝试"+remainTimes+"次，<a name='Logon_index_denglu008' href='"+forgetPwd_URL+"' target='_blank' style='float:none'>点此找回密码</a>?";
				showErrorInfo(errorMessage);
				$('#password').val('');		
				return;
			}else if(errorCode=="unknownUsername"){
				errorMessage='该账户名不存在，<a name="Logon_index_denglu011" href="javascript:void(0);" onclick="javascript:forgetLoginName();">忘记账户名</a>或';
				errorMessage= errorMessage+ '<a name="Logon_index_denglu022" href="'+freeToReg_URL+'" target="_blank">注册新账号</a>?';
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				return;
			}else if(errorCode=="lockedBySystem"){
				if(login.isDigit(logonId)&&(logonId.length==12)){
					errorMessage = "您的会员卡已被锁定，请联系4008-365-365进行解锁。";
				}else{
					errorMessage = "密码错误10次，您可以<a href='"+forgetPwd_URL+"' target='_blank' style='float:none'>找回密码</a>，或1小时后再试。";
				}
				showErrorInfo(errorMessage);
				return;
			}else if(errorCode=="lockedByManual"){
				errorMessage = "您的账号已经被锁定，请联系客服4008-365-365进行解锁。";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				return;
			}else if(errorCode=="notOnlineMember"){
				//会员卡未绑定
				var jumpUrl = memberCard_URL + "?cardInfo=" + logonId;
				window.location.href = jumpUrl;
				return;
			}else if(errorCode=="imperfectMemberCard"){
				errorMessage = "您的会员卡资料不完整，为保证您的账户安全，请携带会员卡及有效证件到就近门店补全资料！";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				return;
			}else if(errorCode == "CARD_PASSWORD_VERIFY_SUCCESS"){
				//账号通用逻辑：1.线下账号验证通过；2.线下账号校验不通过，非初始密码；3.线下账号，初始密码
				// 验证通过
				var jumpUrl = memberCard_URL + "?cardInfo=" + logonId;
				window.location.href = jumpUrl;
				return;
			}else if(errorCode == "CARD_PASSWORD_VERIFY_FAILED"){
				// 验证不通过
				var jumpUrl = memberCard_URL + "?cardInfo=" + logonId;
				window.location.href = jumpUrl;
				return;
			}else if(errorCode == "CARD_PASSWORD_INITIAL"){
				// 账号初始密码
				var jumpUrl = memberCard_URL + "?cardInfo=" + logonId;
				window.location.href = jumpUrl;
				return;
			}else if(errorCode == "serviceNotAvailable"){
				// 当前服务不可用,请稍后再试。
				
				errorMessage = "不好意思，系统繁忙，请稍后再试！";
				if(errorCountHandle(errorMessage)){
					sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
					return;
				}
				showErrorInfo(errorMessage);
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(errorCode == "ECARD_UNBIND"){
				// 团体卡未绑定
				errorMessage = "非个人会员卡暂不支持登录验证，您可以进行<a href='" + companycard_url + "'>验证注册</a>或更换其他账号登录。";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				return;
			}else if(errorCode == "highRiskAccount"){
				// 高危用户
				var jumpUrl = asc_prefix_domain + "/highrisk/getinfo.do?ticket=" + data.snapshotId;
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&高危用户&&ssojboss");
				window.location.href = jumpUrl;
				return;
			}else if(errorCode == "suspectedHighRiskAccount"){
				// 疑似高危用户
		        var jumpUrl = asc_prefix_domain  + "/highrisk/getinfo.do?ticket=" + data.snapshotId;
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&疑似高危用户&&ssojboss");
				window.location.href = jumpUrl;
				return;
			}else if(errorCode == "sopSuspectedHighRiskAccount"){
				// SOP疑似高危用户
		        var jumpUrl = sop_prefix_domain  + "sel/member/toForward.htm?ticket=" + data.snapshotId;
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&SOP疑似高危用户&&ssojboss");
				window.location.href = jumpUrl;
				return;
			}else if(errorCode == "maliciousRegister"){
				// 恶意注册用户
				var _targetUrl_ = "";
				if(getTargetUrl()){
					_targetUrl_ = "&nextTargetUrl=" + getTargetUrl();
				}
				var jumpUrl = asc_prefix_domain + "/maliciousreg/getinfo.do?ticket=" + data.snapshotId + _targetUrl_;
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&恶意注册用户&&ssojboss");
				window.location.href = jumpUrl;
				return;
			}else if(errorCode == "suspiciousLogin"){
		        //异地登陆用户
		        $("#password").blur();
		        getGoUrl();
		        var parentUrl = window.location.href;
		        var targetUrl =  goUrl; 
			    aqSuning.showMobilePopType(false,data.snapshotId,encodeURIComponent(targetUrl),encodeURIComponent(parentUrl));
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&易购帐号登录保护&&ssojboss");
				return;
		    }else if(errorCode == "sopSuspiciousLogin"){
		        //sop异地登陆用户
				errorMessage = "尊敬的商家，请至<a target='blank' href='" + sop_prefix_domain + "'>苏宁云台</a>进行登录";
				showErrorInfo(errorMessage);
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&sop异地登陆用户&&ssojboss");
				return;
		   	}else if(errorCode == "noAliasName"){
		   		//无别名
				errorMessage = "您的资料完善度较低，账号存在安全风险。<br/>请立即<a target='blank' href='" + asc_selfService_URL + "'>人工审核</a>";
				showErrorInfo(errorMessage,"showErrorUsernameDiv");
				return;
		   	}else if(errorCode == "lockedBySelf"){
		   		//自助锁定
		   		var unlockUrl = asc_prefix_domain + "unlockacct/checklist.do?ticket="+data.snapshotId;
				errorMessage = "您的账号已申请锁定，暂时无法登录<br/>您可以：<a target='_blank' href='" + unlockUrl + "'>解锁账号</a>";
				showErrorInfo(errorMessage);
				return;
		   	}else if(errorCode == "IllegalArgument"){
		   		//参数错误
				errorMessage = "请重新登录";
				showErrorInfo(errorMessage);
				return;
		   	}else if(errorCode == "displayLoginPage"){
		   		//跳转到登录页，无需报错提示
				return;
		   	}else if(errorCode!=""){
		   		errorMessage = errorMessage!="" ? errorMessage : "不好意思，系统繁忙，请稍后再试！";
				if(errorCode == "uncategorized" || errorCode == "badCredentials"){
					if(errorCountHandle(errorMessage)){
						return;
					}
				}
				showErrorInfo(errorMessage);
				return;
			}
		}
		
		
		//提交登录
		function prepareLoginSubmit(){
			//如果有图片验证，则需要先校验图片验证码，然后进行提交操作
			hideErrorInfo();
			if(needVerifyCodeVal){
				if(login.userLoginType == "smsLogin"){
					if (!checkSmsLoginPhone() || !checkValidateCodeOnSubmit() || !checkSmsLoginSmsCode()) {
						return false;
					}
					ajaxSmsLogonSubmit();
					//if(checkValidateCodeOnSubmit()){
					//	ajaxCheckVerifyCodeOrSubmit(true);
					//}
				}else{
					if(!checkNormalLogonIdOnSubmit() || !checkNormalLogonPwdOnSubmit()) {
						return;
					}
					//如果出现图片验证码则在提交前应该对图片验证码进行校验
					if(checkValidateCodeOnSubmit()){
						ajaxCheckVerifyCodeOrSubmit(true);
					}
				}
			}else{
				if(login.userLoginType == "smsLogin"){
					ajaxSmsLogonSubmit();
				}else{
					loginSubmit();
				}
			}
			
		}
		//提交登录
		function loginSubmit(){
			hideErrorInfo();
			if(!checkNormalLogonIdOnSubmit() || !checkNormalLogonPwdOnSubmit()) {
			    return;
		  	}else{
		  	   //当含有snapshotId表示要进行主站的跳转登陆：跳转前要进行统一的编码
		  	  	if(goUrl.indexOf("snapshotId")!=-1){
                //submitSnaphotForm();
				ajaxLogonSubmit();
		  	  	}else{
		  	  	    ajaxLogonSubmit();
		  	  	}
		  	}
		}
		//带有snapshopid的提交
		function submitSnaphotForm(){
			var username = $('#userName').val().Trim();
			var pwd  = $('#password').val().Trim();
			var loginTheme =  "b2c";
			var highRiskRedirectFlag = true;
			var service        = "https://loginst.suning.com//auth?targetUrl=https%3A%2F%2Fproduct.suning.com%2F0070881552%2F11201361410.html";
			var oauth_redirect = "";
			var trust_redirect = "";
			//var rememberMeVal = document.getElementById("rememberMe").checked;
			
			$('#username1').val(username);
			$('#password1').val(pwd);
			$('#loginTheme1').val(loginTheme);
			$('#highRiskRedirectFlag1').val(highRiskRedirectFlag);
			$('#service1').val(service);
			$('#oauth_redirect1').val(oauth_redirect);
			$('#trust_redirect1').val(trust_redirect);
			$('#detect').val(getDetect())
			$('#terminal').val(getTerminal());
			$('#loginChannel').val(getChannel());
			$('#dfpToken').val(getDfpToken());
			//$('#rememberMeVal').val(rememberMeVal);
			//自动登录
			$('#rememberMeVal').val(true);
			if(needVerifyCodeVal){
			  var uuid = "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47";
			  var verifyCode = $(".validate:visible").val();
				$('#uuid1').val(uuid);
				$('#validate1').val(verifyCode);
			}
			$('#snapshotForm').submit();
		}
		
		//采用ajax方式进行认证请求
		function ajaxLogonSubmit(){
			var username = $('#userName').val().Trim();
			var pwd  = $('#password').val().Trim();
			try {
				var encrypt = new JSEncrypt();
				encrypt.setPublicKey(loginPBK);
				var pwd2 = encrypt.encrypt(pwd);
				pwd = "";
		    } catch (exception) {
		        pwd2 = "";
		    }
			var verifyCode = $(".validate:visible").val();
			//var rememberMeVal = document.getElementById("rememberMe").checked;
			//默认自动登录
			var rememberMeVal = true;
			var param = {
					jsonViewType:true,
					username : username,
					password : pwd,
					password2 : pwd2,
					loginTheme:"b2c",
					service:"https://loginst.suning.com//auth?targetUrl=https%3A%2F%2Fproduct.suning.com%2F0070881552%2F11201361410.html",
					//oauth_redirect:"",
					//trust_redirect:"",
					rememberMe: rememberMeVal,
					client : "app",
					sceneId: "logonImg",
					detect:getDetect(),
					dfpToken:getDfpToken(),
					terminal:getTerminal(),
					loginChannel:getChannel()
			};
			if(needVerifyCodeVal){
				if(isIarVerifyCode){
					param.uuid = "iarVerifyCode"
					param.iarVerifyCode=iar.queryToken();
				}else if(isUseSlideVerifycode){
					param.slideVerifyCode = siller.queryToken();
		    	}else{
					param.verifyCode = verifyCode;
					param.uuid = "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47";
		    	}
			}
			//登陆中
			showSubmitRunningButton();
			$.ajax( {
				type : 'POST',
				url  : 'login',
				async: false,
				data : param,
				dataType : 'json',
				success : function(data) {
					if(login.isNotEmpty(data) && login.isNotEmpty(data.success)&&data.success){
						//进行成功的跳转
						window.location = goUrl;
						window.event.returnValue = false;
					}else{
						//重新显示图片验证码--图片验证码下线
						//fun_getVcode();
						//是否显示图片验证码
						checkShowImageCode();
						//设置焦点--引起登录失败后调用两次needVerifyCode接口
						//setInitLogonIdinfo();
						showServerErrorMsg(data);
						//重置登录按钮
						showSubmitButton();
					}
				},
				error : function(data) {
					var errorMessage = "不好意思，系统繁忙，请稍后再试！";
					showErrorInfo(errorMessage);
					//重置登录按钮
					showSubmitButton();
					//设置焦点
					setInitLogonIdinfo();
				}
			});
		}
		
		function checkSmsLoginPhone(){
			var phoneNumber = $('#phoneNumber').val().Trim();
			var smsCode  = $('#smsCode').val().Trim();
			
			if (phoneNumber == null || phoneNumber == "") {
				showErrorInfo("请输入手机号！","showErrorPhoneNumberDiv");
				return false;
			}
			if(!login.isMobile(phoneNumber)){
				showErrorInfo("格式不正确，请您输入正确的手机号！","showErrorPhoneNumberDiv");
				return false;
			}
			hideErrorInfo();
			return true;
		}
		function checkSmsLoginSmsCode(){
			var smsCode  = $('#smsCode').val().Trim();
			if (smsCode == null || smsCode == "") {
				showErrorInfo("请输入手机验证码！","showErrorSmsCodeDiv");
				return false;
			}
			return true;
		}
		
		//校验验证码并发送
		function ajaxVerifyCodeAndSendSmsCode(){
			var phoneNumber = $('#phoneNumber').val().Trim();
			
			if (!checkSmsLoginPhone()) {
				return false;
			}
			if(needVerifyCodeVal){
			
				if(isIarVerifyCode){
					if(iarToken==null || iarToken=="" || !iar.queryStatus()){
						showErrorInfo("为了你的账户安全，请点击按钮完成验证。");
						return false;
					}else{
						//进行提交操作
						ajaxSmsLogonSendCode();
					}
				}else if(isUseSlideVerifycode){
					if (siller.status == 0 || null == slideVerifycode || slideVerifycode == "" ) {
						showErrorInfo("为了你的账户安全，请拖动滑块完成验证。");
						return false;
					}else{
						//进行提交操作
						ajaxSmsLogonSendCode();
					}
				}else{
					//用户输入的验证码code
					var code = $(".validate:visible").val();
					//请求时所传参数
					var param = {
							code : code,
							uuid : "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47",
							delFlag : 0
					};
					$.ajax({
						//请求类型
						type : 'POST',
						//发送验证请求的url
						url : "https://vcs.suning.com/vcs/validate_jsonp.htm",
						//请求时所传参数
						data : param,
						//返回数据类型
						dataType : 'jsonp',
						//回调函数方法名
						jsonp : 'callback',
						//请求成功后的回调函数
						success : function(data) {
							//显示验证结果
							if(data[0].result == 'true'){
								hideErrorInfo();
								showVerifyCodeOK();
								//进行提交操作
								ajaxSmsLogonSendCode();
							}else{
								gLastImgValCodeResult = false;
								// 当输入满4位时，鼠标未移出就开始校验图片验证码正确性。若连续输入错误3 次，系统自动刷新图片验证码。
								//fun_getVcode();
								showErrorInfo("验证码不正确，请重新输入。","showErrorVerifyCodeDiv");
							}
						}
					});
				}
			}else{
				//进行提交操作
				ajaxSmsLogonSendCode();
			}
		}
		
		//手机验证码登录发送验证码
		function ajaxSmsLogonSendCode(){
			hideErrorInfo();
			var phoneNumber = $('#phoneNumber').val().Trim();
			
			if (!checkSmsLoginPhone()) {
				return false;
			}
			
			var verifyCode = $(".validate:visible").val();
			//var rememberMeVal = document.getElementById("rememberMe").checked;
			//默认自动登录
			var rememberMeVal = true;
			var param = {
					phoneNumber : phoneNumber,
					rememberMe: rememberMeVal,
					type : 0,
					sceneId: "logonImg",
					targetUrl: goUrl,
					detect:getDetect(),
					dfpToken:getDfpToken(),
					terminal:getTerminal(),
            createChannel:getChannel(),
            mode:'1',
            subMode:'4'
			};
        var phoneNumberRsa = ssojbossUtil.rsaEncryptString(phoneNumber, rdsyKey);
        var params = {
            "sceneId" : ssojbossConstant.rdsySceneId,
            "stepFlag" : ssojbossConstant.stepTwoFlag,
            "appCode" : ssojbossConstant.rdsyAppCode,
            "riskType" : ssojbossValue.riskType,
            "phoneNum" : phoneNumberRsa,
            "callback" : "sendCode",
            "ticket" : ssojbossValue.smsTicket,
            "code":"",
            "uuid":"",
            "data" :{
                "ways":"duanxindl",
                "channel":"PC",
                "orderChannel":getChannel(),
                "dfpToken":getDfpToken(),
                "detect":getDetect(),
                "loginTheme": "b2c",
                "userName":phoneNumber,
                "cntctMobileNum":phoneNumber,
                "checkAliasName":"0",
                "referenceURL":window.location.href
            }
        };
        if(needVerifyCodeVal){
            if(isIarVerifyCode){
                params.uuid = "iarVerifyCode"
                params.iarVerifyCode=iar.queryToken();
                params.code=iar.queryToken();
            }else if(isUseSlideVerifycode){
                params.sillerCode = siller.queryToken();
                params.uuid = "sillerVerifyCode";
                params.code=siller.queryToken();
            }else{
                params.imgCode = verifyCode;
                params.uuid = "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47";
                params.code=verifyCode;
            }
        }

        console.log("sendCode request data===》",params);
        var encodeData=SuAES.encrypt(JSON.stringify(params));
        var _postData = {_x_rdsy_block_:encodeData};
        $.ajax({
            type : 'GET',
            url  : rdsy_prefix_domain + 'rdsy/sendCode.do',
            data : _postData,
            dataType : 'jsonp',
            timeout:5000,
            jsonpCallback:'sendCode',
            success : function(data) {
                console.log("sendCode===》",data);
                if(login.isNotEmpty(data) && login.isNotEmpty(data._x_rdsy_resp_)){
                    var req = JSON.parse(SuAES.decrypt(data._x_rdsy_resp_));
                    console.log("sendCode result==>",req);
                    if(req.status=='COMPLETE'){						//进行成功的处理
                        login.sendSmsChangeStatus(req);
                        ssojbossValue.loginTicket = req.data.ticket;
                    }else if(req.status=='FAILURE'){
                        if(req.code == "R0004"){
                            ssojbossUtil.hideAllVerifyCode();
                            ssojbossValue.smsTicket=req.data.ticket;
                            ssojbossUtil.judgeVerifyType(req.data.riskType);
                            ssojbossValue.riskType=req.data.riskType;
                        }else {
                            showErrorInfo(req.msg);
                        }
                    }
                }else{
						//重新显示图片验证码
						//fun_getVcode();
						//是否显示图片验证码
						checkShowImageCode();
						showSmsLoginServerErrorMsg(data);
					}
				},
				error : function(data) {
					var errorMessage = "不好意思，系统繁忙，请稍后再试！";
					showErrorInfo(errorMessage);
				}
			});
		}
		//手机验证码登录发送语音验证码
		function ajaxVerifyCodeAndSendYYCode(){
			hideErrorInfo();
			var phoneNumber = $('#phoneNumber').val().Trim();
			
			if (!checkSmsLoginPhone()) {
				return false;
			}
			
			var verifyCode = $(".validate:visible").val();
			//var rememberMeVal = document.getElementById("rememberMe").checked;
			//默认自动登录
			var rememberMeVal = true;
			var param = {
					phoneNumber : phoneNumber,
					rememberMe: rememberMeVal,
					type : 0,
					sceneId: "logonImg",
					targetUrl: goUrl,
					detect:getDetect(),
					dfpToken:getDfpToken(),
					terminal:getTerminal(),
					createChannel:getChannel()
			};
			if(needVerifyCodeVal){
				if(isIarVerifyCode){
					param.uuid = "iarVerifyCode"
					param.iarVerifyCode=iar.queryToken();
				}else if(isUseSlideVerifycode){
					param.sillerCode = siller.queryToken();
					param.uuid = "sillerVerifyCode";
		    	}else{
					param.imgCode = verifyCode;
					param.uuid = "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47";
		    	}
			}
			$.ajax({
				type : 'GET',
				url  : srs_prefix_domain + 'smsLogin/sendSmsYY.do',
				data : param,
				dataType : 'jsonp',
		        jsonp:'callback', 
		        timeout:5000,
		        jsonpCallback:"smsLoginSendSmsYy",
				success : function(data) {
					if(login.isNotEmpty(data) && (data.code == 'SLR_SUC_0001')){//发送成功
						//进行成功的处理
						login.sendSmsYyChangeStatus(data);
					}else{
						//重新显示图片验证码
						//fun_getVcode();
						//是否显示图片验证码
						checkShowImageCode();
						showSmsLoginServerErrorMsg(data);
					}
				},
				error : function(data) {
					var errorMessage = "不好意思，系统繁忙，请稍后再试！";
					showErrorInfo(errorMessage);
				}
			});
		}
		
		//手机验证码登录采用ajax方式进行认证请求
		function ajaxSmsLogonSubmit(){
			var phoneNumber = $('#phoneNumber').val().Trim();
			var smsCode  = $('#smsCode').val().Trim();
			
			if (!checkSmsLoginPhone() || !checkSmsLoginSmsCode()) {
				return false;
			}
			if(protAfterLogin=='2'){
				$('.register-protocol').removeClass('hide');
				return;
			}
			var verifyCode = $(".validate:visible").val();
			//document.getElementById("rememberMe").checked;
			//默认自动登录
			var rememberMeVal = true;
			var param = {
					ticket:ssojbossValue.loginTicket,
			                phoneNumber : ssojbossUtil.rsaEncryptString(phoneNumber, ssojbossConstant.checkAccountKey),
			                channel: ssojbossConstant.channel,
					smsCode:smsCode,
					rememberMe: rememberMeVal,
					type : 1,
					sceneId: "PASSPORT",
					targetUrl: goUrl,
					service:"https://loginst.suning.com//auth?targetUrl=https%3A%2F%2Fproduct.suning.com%2F0070881552%2F11201361410.html",
					detect: getDetect(),
					secondFlag:"100000000010",
					dfpToken:getDfpToken(),
					terminal:getTerminal(),
					createChannel:getChannel(),
					loginChannel:getChannel(),
					smsCodeVersion:'1.0',
					jsonViewType: true,
					viewType: 'json',
					loginOrRegFlag: loginOrRegFlag,
					version:"2.0"
			};
			if(needVerifyCodeVal){
				if(isIarVerifyCode){
					param.uuid = "iarVerifyCode";
					param.iarVerifyCode=iar.queryToken();
				}else if(isUseSlideVerifycode){
					param.sillerCode = siller.queryToken();
					param.uuid = "sillerVerifyCode";
		    	}else{
					param.imgCode = verifyCode;
					param.uuid = "bd1e8cfa-092d-4b5b-ba86-fc04757a8b47";
		    	}
			}
			//登陆中
			showSubmitRunningButton();
			$.ajax({
				type : 'GET',
            url  : passport_prefix_domain + 'ids/smartLogin/sms',
            data : param,
            dataType : 'jsonp',
            jsonp:'callback',
            //timeout:5000,
            jsonpCallback:"smsLogin",
            success : function(data) {
				//返回处理
                onSmsLoginBack(data);
			},
            error : function(data) {
                var errorMessage = "不好意思，系统繁忙，请稍后再试！";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
                //rememberMeVal(errorMessage,2000);
            }
                
        });
    }
    
	/**
	* 短信登录返回
	* 1. 判断返回是 短信错误还是登录错误
	* 2.
	*/
	function onSmsLoginBack(data){
		//判断是否登录成功
        if((isNotEmpty(data) && isNotEmpty(data.success) && data.success) ||
                (isNotEmpty(data) && isNotEmpty(data.res_message) && data.res_message == "SUCCESS" && data.res_code == 0 )){
            // 登录成功，记录登录名
            //var name = $('#phoneNumber').val().Trim();
            //addCookie(name,1);
            //进行成功的跳转
            if(isNotEmpty(data.redirectUrl)){
                window.location =data.redirectUrl + "&agentType=pc";
            }else{
                window.location = goUrl;
            }
        }else if(isNotEmpty(data) && data.code == 302 && data.statusCode && isNotEmpty(data.location) ){	//302判断
			var location = data.location;
			location = location.replace("callback=smsLogin","").replace("viewType=json","").replace("jsonViewType=true","")
			window.location = location;
		}else{
            //判断是否注册异常
            var code = data.code;
            if(code && code.indexOf("SLR_") == 0){
                regException(data);
            }else{
                loginException(data);
            }
        }
	}

	/**
     * 注册异常
     *
     */
	function regException(data){
	    //没有账号需要注册
        if(data.code == 'SLR_ERR_0006'){
			protAfterLogin='1';
			$('.register-protocol').removeClass('hide');
            smsToken_global=data.smsToken;
        }else if(data.code == 'SLR_ERR_0017'){
            //二次卡逻辑跳转安全中心
            window.location = asc_prefix_domain + 'wap/secondCard/show_0.do?ticket=' + data.smsToken; //二次卡流程
            window.event.returnValue = false;
        }else{
			//重新显示图片验证码
			//fun_getVcode();
			//是否显示图片验证码
			checkShowImageCode();
			//设置焦点
			setInitLogonIdinfo();
			showSmsLoginServerErrorMsg(data);
			//重置登录按钮
			showSubmitButton();
        }
    }
	
	function confirmLogin(smsToken){
        var param = {
            rememberMe:true,
            smsToken:smsToken,
			version : "2.0",
            detect:getDetect(),
            dfpToken:getDfpToken(),
            terminal:getTerminal(),
            createChannel:getChannel(),
			loginChannel:getChannel(),
            service:"",
            jsonViewType: true,
            viewType: "json"
        }
		showSubmitRunningButton();
        $.ajax({
            type : 'GET',
            url  : passport_prefix_domain + "ids/smartLogin/sms" ,
            data : param,
            //返回数据类型
            dataType : 'jsonp',
            //回调函数方法名
            jsonp : 'callback',
            //timeout:5000,
			jsonpCallback:"smsLogin",
            success : function(data) {
                //返回处理
                onSmsLoginBack(data);
            },
            error : function(data) {
                var errorMessage = "不好意思，系统繁忙，请稍后再试！";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
                //rememberMeVal(errorMessage,2000);
            }
        });
    }

	// 获取目标地址
	function getTargetUrl(){
		var _targetUrl_ = "?loginTheme=b2c&service=https%3A%2F%2Floginst.suning.com%2F%2Fauth%3FtargetUrl%3Dhttps%253A%252F%252Fproduct.suning.com%252F0070881552%252F11201361410.html".split("targetUrl%3D");
		return _targetUrl_[1];
	}

    /**
     * 登录异常处理
     *
     * */
    function loginException(data){
        showServerErrorMsg(data)
    }
	
	function isNotEmpty(objVal){
		if(objVal==null || objVal == undefined || objVal=="" || objVal.length==0){
			return false;
		}else{
			return true;
		}
	};
	
		//显示服务器返回的错误信息
		function showSmsLoginServerErrorMsg(data) {
			initShowVerifyCode();
			var errorCode= "";
			if(login.isNotEmpty(data) && login.isNotEmpty(data.code)){
				errorCode = data.code;
			}

			//srs中的错误提示信息
			if(errorCode=="SLR_ERR_0001"){
				errorMessage = "请输入手机号码";
				showErrorInfo(errorMessage);
				return;
			}else if(errorCode=="SLR_ERR_0002"){
				if(isUseSlideVerifycode){
					errorMessage = "为了你的账户安全，请重新拖动滑块完成验证";
					showErrorInfo(errorMessage,"showErrorPhoneNumberDiv");
				}else{
					errorMessage = "请输入图片验证码！";
					showErrorInfo(errorMessage,"showErrorVerifyCodeDiv");
				}
				return;
			}else if(errorCode=="SLR_ERR_0003"){
				if(isUseSlideVerifycode){
					errorMessage = "为了你的账户安全，请重新拖动滑块完成验证";
					showErrorInfo(errorMessage,"showErrorPhoneNumberDiv");
				}else{
					errorMessage = "图片验证码错误，请重新输入！";
					sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
					showErrorInfo(errorMessage,"showErrorVerifyCodeDiv");
				}
				return;
			}else if(errorCode=="SLR_ERR_0004"){
				errorMessage = "手机验证码错误或已失效，请重新输入 ";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(errorCode=="SLR_ERR_0010"){
				errorMessage = "您今日获取语音验证码的次数已达上限，您可以继续尝试获取短信验证码";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(errorCode=="SLR_ERR_0011"){
				errorMessage = "发送验证码过于频繁，请您稍后再试";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(errorCode=="SLR_ERR_0012"){
				errorMessage = "您当日累计获取短信验证码已达上限，请您次日再试";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(errorCode=="SLR_ERR_0013"){
				errorMessage = "该时间段不支持使用语音验证码，您可以继续尝试获取短信验证码";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else if(errorCode=="SLR_ERR_9999"){
				errorMessage = "不好意思，系统繁忙，请稍后再试！";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}else{
				errorMessage = "不好意思，系统异常，请稍后再试！";
				showErrorInfo(errorMessage,"showErrorSmsCodeDiv");
				sendPageErrorMessage("login.do","1&&"+errorCode+"&&"+errorMessage+"&&ssojboss");
				return;
			}
		}


        function ccasd(t) {
        	slideVerifycode = t;
        	try{
            	var sillerObj = $(".sillerVerifyCode:visible")
            	if(sillerObj && sillerObj.length>0){
            		if(siller.status == 1){
                    	sa.click.sendDatasIndex(sillerObj[0]);
            		}
            	}
			}catch(e){}
        }
		/* PCLOG===错误信息采集===*/    
	function sendPageErrorMessage(urlName,msg){
		var msgArr = msg.split("&&");
		var param = {
				type_name : urlName,//接口名称
				error_type : msgArr[0],//错误类型：0系统异常、1业务异常、2页面检查
				error_code : msgArr[1],//报错代码： 不仅仅是404之类的
				error_detail : msgArr[2],//报错详情：提示详情描述
				
				member_id : login.getCookie("custno"),//会员编码
				member_level :login.getCookie("custLevel"),//会员等级
				region : login.getCookie("SN_CITY"),//区域
				
				bid : msgArr[3] //产品线标识
				};
			try{
				sa.openAPI=sa.openAPI||{};
				sa.initTrackerConfig();
				sa.openAPI.sendMsgV2(param);
				//sa.openAPI.sendMessage(urlName,msg);
				//alert("success-msg-->"+param.region);
				//alert("success-msg-->"+param.error_code);
			}catch(e){
				//alert(e);
			}	
	}
		
	    $(function(){
	    	setAllDomain();
	    	
	    	var postData = {};
	    	postData.errorCode = '';
	    	postData.snapshotId = '';
	    	
	    	//初始化默认隐藏所有的提示
	    	showScanhide();
	    	//检测华夏基金等信任登录的cookies信息
	    	checkTrustCookie();
	    	//获取成功之后的跳转路径
	    	getGoUrl();
	    	//是否显示图片验证码
	    	checkShowImageCode();
	    	//初始化图片验证码
	    	//fun_getVcode();
	    	//绑定各种输入框的函数
	    	checkInputEvent();
	    	//显示服务端错误信息
	    	showServerErrorMsg(postData);
	    	//设置是否显示图片验证码
	    	//initShowVerifyCode();
	    	setLogonStylebyImage();
			
			if("1" == notUseSmsLogin){
				hideSms();
			}
			
	    });
		
		//隐藏短信登录
		function hideSms(){
				$(".phone-login").hide();
				$(".username-login").show();
				$(".login-switch").hide();
			}
			
    </script>
	
	<script type="text/javascript">
		var sa = sa || {};
		sa.bid = "106";
	</script>
    <script type="text/javascript" src="https://res.suning.cn/javascript/??sn_da/sa-analytics.js,sn_da/sa-functions.js,sn_da/sa_simple.js,sn_da/sa_click.js,sn_pf/agent_js/performance_agent.js?v=20150528"></script>
	<script type="text/javascript">
		/**
		 * 更新记录：
		 * 1.增加对采集元素包裹文字中包含的“|”进行处理（2014/1/21）
		 */
		
		/**
		 * 第一步：在页面引入基础代码
		 * 埋点前请检查页面是否已经埋入此代码，避免重复引入代码
		 * 此部分代码不允许修改，若私自修改源码导致出现的问题，后果自负
		 */
		eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('2 9;5(!9)9={};5(!9.A)9.A={};(4(){2 N=/^\\w*?.k.h$/,15=a.y.1r,K=(("1g:"==a.y.K)?"1g://":"1v://"),S=U(),7="|",R=j.16==j.1w?y.P:j.16.y.P,18=p(1f(R));4 E(f){2 6=f.6?p(f.6):"6 L",l=f.l?p(f.l):"l L",c=o 1s(),1m=(C(f,c),c)?p(c.1A("").O(/\\s|\\|/1E,"")):"1y L",g=(g=a.1l("1x"))?g.r:"",1o=l+7+6+7+1m,q=(q=a.1l("1u"))?q.r:"",17=K+S+"/1t.1z",F=V(),I="I";1h(I,F,\'/\',"","");2 1j=W("1D"),T=1C Y=="1B"?Y.12:"1F 1p 1q 12",1n=F+7+1j+7+1o+7+18,14=17+"?"+"1M="+1n+"&"+"20="+q+"&"+"g="+g+"&"+"22="+T;13(14)}4 V(){2 1e=o B(),m=10.1Y(21*10.1Z()),X=1e.D().1W().1X(m);d X}4 W(6){2 G=a.1a.Z("; ");1b(2 i=0;i<G.1k;i++){2 H=G[i].Z("=");5(H[0]==6)d 23(H[1])}}4 13(Q){2 n="28"+(o B()).D();2 i=j[n]=o 27();i.26=(i.24=4(){j[n]=x});i.1G=Q+"&25="+n;i=x}4 U(){5(N.1U(15)){d"A.k.1i/9"}z{d"1L.k.1i/9"}}4 19(){d a.e}4 1h(6,r,t,u,e){2 b=6+"="+1V(r);5(u!=""){2 v=o B();v.1K(v.D()+u);b+=";u="+v.1J()}5(t!=""){b+=";t="+t}2 J=19();5(J.M(".k.h")!=-1){b+=";e=.k.h"}z 5(J.M(".1c.h")!=-1){b+=";e=.1c.h"}z{b+=";e="+e}a.1a=b}4 1f(8){5(8.1k>1H){8=8.1I(0,1N)}1O(8.M(7)!=-1){8=8.O(7,"--")}d 8}4 C(n,c){5(n.1d==3){c.1T(n.1S)}z 5(n.1d==1){1b(2 m=n.1R;m!=x;m=m.1P){C(m,c)}}}4 p(s){d s!=x?1Q(s):""}2 11=9.A;11.E=E})();',62,133,'||var||function|if|name|_tag|urlOrTitle|sa|document|str|_strings|return|domain|data|_type|com||window|suning|id|||new|_encode|_errorCode|value||path|expires|date||null|location|else|click|Date|_getString|getTime|sendDatasIndex|oId|arrStr|temp|_snck|dm|protocol|undefined|indexOf|sn_prd_reg|replace|href|strURL|_toUrl|server|_cityId|getServer|getOnlyIdIndex|getCookieIndex|onlyId|sn|split|Math|_click|cityId|httpGifSendIndex|url|hostName|top|clickUrl|_shortToUrl|_getDomain|cookie|for|cnsuning|nodeType|now|_cutUrlToShort|https|_addCookie4Index|cn|pvId|length|getElementById|_text|cDatas|Datas|not|get|hostname|Array|ajaxClick|errorCode|http|self|resourceType|text|gif|join|object|typeof|_snmp|ig|can|src|301|substring|toGMTString|setTime|clicksit|_snmk|300|while|nextSibling|encodeURIComponent|firstChild|nodeValue|push|test|escape|toString|concat|round|random|_snme|100000|_cId|unescape|onerror|iId|onload|Image|log_'.split('|'),0,{}))
		
		/**
		 * 第二步：为元素绑定click事件
		 * 技术支持：此方案需要jQuery支持，使用此方案前请确认使用的jquery版本对live方法的支持性
		 * 功能：为点击对象添加点击事件处理函数
		 * 示例解释：下面的示例中是为标签的name以test_dac_index_开头的元素埋点，实际生产中的name属性命名约束请联系贺婷芳(12061488)确认；未经确认不得埋点，否则引起冲突后果自负
		 * 示例修改：在具体埋点过程中请开发人员根据具体的name修改a[name^=\*需要埋点的name*\]或者input[name^=\*需要埋点的name*\]
		 * 命名技术规范：标签的name,id属性不能含有"|"
		 */
		
		 $(document).ready(function(){
			//登录页面发送数据到SA
			$("a[name*=Logon_index_],input[name*=Logon_index_],span[name*=Logon_index_],img[name*=Logon_index_],div[name*=Logon_index_]").live("click",function(){
				//sendDatasMember(this);
				sa.click.sendDatasIndex(this);
			});
		});
	</script>
	
	<script type="text/javascript" src="https://dfp.suning.com/dfprs-collect/dist/fp.js?appCode=qEmt9X4YmoV2Vye8"></script>
	<script type="text/javascript">
		function getDfpToken(){
        try{
			dfpToken = _dfp.getToken();
			return dfpToken;
		}catch(exception){
			return "passport_dfpToken_js_is_error";
		}
    }
	</script>
	<!--二次卡验证交互-->
	<script>
		//是否需要二次卡校验
		function needSecondCardValidate(){
			if(!secCardFlag){
				return ;
			}
			var param = {
					mobileNum: $("#phoneNumber").val().Trim(),
					detect: getDetect(),
					dfpToken: getDfpToken()
				};
			var encodeData=SuAES.encrypt(JSON.stringify(param));
			var _postData = {_x_sso_block_:encodeData};
			$.ajax({
				type: 'GET',
				url: passport_prefix_domain + 'ids/secCard/needSecondCardValidate', 
				data: _postData,
				dataType: 'jsonp',
				jsonp : 'callback',
				//timeout: 5000,
				jsonpCallback: 'nscValidate',
				success: function(data){
					if(data && data.code === 'SC0001'){
						remainTimes=data.data.remainTimes;
						$(".secondCard-check").show();
					}else{
						ajaxVerifyCodeAndSendSmsCode();
					}
				},
				error : function(data) {
				}
			});
		}
		
		$(document).ready(function(){
			$(".op-btn-shop").click(function(){
				$("#receiver").val("");
				$(".input-error-tip").hide();
			    if(remainTimes=="0"){
					$(".novalidate-times").show().siblings().hide();
				}else{
					$(".input-receiver").show().siblings().hide();
				}
			});
			$(".op-btn-noshop").click(function(){
				loginOrRegFlag = "2";
				protAfterLogin='2';
				$(".secondCard-check").hide();
				$(".first-step").show().siblings().hide();
				ajaxVerifyCodeAndSendSmsCode();
			});
			$(".to-reg").click(function(){
				loginOrRegFlag = "2";
				$(".secondCard-check").hide();
				$(".first-step").show().siblings().hide();
				ajaxVerifyCodeAndSendSmsCode();
			});
			$(".to-register").click(function(){
				loginOrRegFlag = "2";
				$(".secondCard-check").hide();
				$(".first-step").show().siblings().hide();
				ajaxVerifyCodeAndSendSmsCode();
			});
			$(".validate").click(function(){
				if($("#receiver").val()==''){
					$(".input-error-tip").show().find('span').html("请输入历史收货人");
					$(".input-error-tip").show().find('a').hide();
					$(".validate").addClass("validate-invisible");
					return;
				}
				var param = {
					mobileNum: $("#phoneNumber").val().Trim(),
					cntctPointName: $("#receiver").val().Trim()
				};
				var encodeData=SuAES.encrypt(JSON.stringify(param));
                var _postData = {_x_sso_block_:encodeData};
			$.ajax({
				type : 'GET',
				url : passport_prefix_domain+'ids/secCard/validateCntctName',
				data : _postData,
				dataType: 'jsonp',
				jsonp:'callback',
				//timeout: 5000,
				jsonpCallback: 'validateCntctName',
				success : function(data) {
					if(data && data.code ==='SC0100'){
						loginOrRegFlag = "1";
						$("#receiver").val("");
						$(".validate-success").show().siblings().hide();
						setTimeout(function(){
							$(".secondCard-check").hide();
						},3000);
						// 验证成功发短信
						ajaxVerifyCodeAndSendSmsCode();
					}else if(data && data.code ==='SC0101'){
						$(".input-error-tip").show().find('span').html("您输入的收货人不匹配，今天还有"+data.data.remainTimes+"次输入机会，请重新输入，或");
						$(".input-error-tip").show().find('a').show();
					}else if(data && data.code ==='SC0102'){
						$(".input-error-tip").show().find('span').html('您已输错' + data.data.failedLimit +'次，请明天再试，或');
						$(".input-error-tip").show().find('a').show();
					}else{
						$(".input-error-tip").show().find('span').html(data.message);
						$(".input-error-tip").show().find('a').show();
					}
					//if(data && data.failedLimit ===3 ){
					//	$(".input-error-tip").show().find('span').html("您已输错3次，请明天再试");
					//	$(".input-error-tip").show().find('a').show();
					//}
					//if(data && data.remainTimes ===0){
					//	$(".novalidate-times").show().siblings().hide();
					//}
				},
				error : function(data) {
				}
			});
			});
			$('#receiver').bind("input propertychange", function(){
				if($("#receiver").val()!==''){
					$(".input-error-tip").hide();
					$(".input-error-tip").find('a').show();
					$(".validate").removeClass("validate-invisible");
				}
			});
			$(".closeBtn").bind("click", function(){
				$(".secondCard-check").hide();
				$(".first-step").show().siblings().hide();
			})
			$(".cancel").bind("click", function(){
				$(".secondCard-check").hide();
				$(".first-step").show().siblings().hide();
			})
			$('.agree-btn').on('click',function(){
				if(protAfterLogin=='1'){
					protAfterLogin='0'
					//发起确认登录
					confirmLogin(smsToken_global);
				}else{
					protAfterLogin='0'
					ajaxSmsLogonSubmit();
				}
				
            })
		})
	</script>

<script type="text/javascript" src="//res.suning.cn/project/cmsWeb/suning/public/base/ariaJs/aria.js?appid=1bd0d223e29b12158d7f2c05842f9eae" async="" defer="" charset="utf-8"></script><iframe src="https://dfp.suning.com/dfprs-collect/dist/ifm.html?v=02" id="_fsd" style="display: none;"></iframe></body></html>
